(this["webpackJsonpcloud-inversion"]=this["webpackJsonpcloud-inversion"]||[]).push([[0],{119:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(21),s=a.n(r),o=(a(96),a(1)),l=a(2),c=a(4),u=a(3),d=a(64),h=a.n(d),m=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return console.log("Rendering gradient"),i.a.createElement("div",{className:h.a.gradientBackground})}}]),a}(n.Component),p=a(65),v=a.n(p),y=function(){function e(t,a,n,i,r){Object(o.a)(this,e),this.p5=n,this.id=t,this.location=n.createVector(a.x,a.y),this.velocity=n.createVector(0,-r.animationSpeed),this.connectionThreshold=n.height/2,this.previousMover=i,this.properties=r}return Object(l.a)(e,[{key:"update",value:function(){this.location.add(this.velocity),this.isOutOfCanvas()?this.destroyCallback():(this.display(),this.drawConnection())}},{key:"isOutOfCanvas",value:function(){return this.location.y<0}},{key:"display",value:function(){this.p5.noStroke(),this.p5.fill(this.properties.primeMoverColor);var e=this.p5.height,t=this.p5.map(this.location.y,0,e,10,50);this.p5.ellipse(this.location.x,this.location.y,t,t)}},{key:"registerDestructionCallback",value:function(e){this.destroyCallback=e}},{key:"drawConnection",value:function(){if(null!=this.previousMover){var e=this.previousMover.location,t=e.x,a=e.y;if(Math.abs(this.location.y-a)>this.connectionThreshold)this.previousMover=null;else{this.p5.stroke(this.properties.primeMoverColor),this.p5.noFill(),this.p5.strokeWeight(1.5);var n=(this.location.x-t)/2,i=(this.location.y-a)/2;i<50&&(i=this.p5.random(-50,50)),n<50&&(n=this.p5.random(-50,50)),this.p5.bezier(this.location.x,this.location.y,this.location.x-this.p5.random(0,n),this.location.y-this.p5.random(0,i),t+this.p5.random(0,n),a+this.p5.random(0,i),t,a)}}}}]),e}(),f=a(77),b=a.n(f),g=a(189),k=function(){function e(t,a,n,i){var r=this;Object(o.a)(this,e),this.p5=n,this.id=t,this.coordinates=a,this.secondaryMovers=new Map,this.destroyCallback=null,this.destructionInitiated=!1,this.intervalId=setInterval((function(){var e=Object(g.a)();r.secondaryMovers.set(e,new C(e,a.x,n,i.animationSpeed,i.secondaryMoverColor,(function(e){return r.deleteMover(e)})))}),Number.parseInt(n.random(30,150)))}return Object(l.a)(e,[{key:"update",value:function(){0===this.secondaryMovers.length&&this.destructionInitiated&&this.destroyCallback(),this.secondaryMovers.forEach((function(e){return e.update()}))}},{key:"deleteMover",value:function(e){this.secondaryMovers.delete(e.id),e=null}},{key:"registerDestructionCallback",value:function(e){this.destroyCallback=e}},{key:"initiateDestruction",value:function(){clearInterval(this.intervalId),this.destructionInitiated=!0}}]),e}(),C=function(){function e(t,a,n,i,r,s){Object(o.a)(this,e),this.id=t,this.p5=n,this.deleteCallback=s;var l=-i*n.random(2,4);this.size=n.random(.01*n.width,.05*n.width),this.location=n.createVector(n.random(a-.0625*n.width,a+.0625*n.width),n.height+20),this.velocity=n.createVector(0,l),this.color=r,this.alpha=Number.parseInt(n.random(50,200))}return Object(l.a)(e,[{key:"update",value:function(){this.location.add(this.velocity),this.isOutOfCanvas()?this.deleteCallback(this):this.display()}},{key:"isOutOfCanvas",value:function(){return this.location.y<0}},{key:"display",value:function(){this.p5.noStroke(),this.p5.fill(this.p5.color(this.p5.red(this.color),this.p5.green(this.color),this.p5.blue(this.color),this.alpha)),this.p5.ellipse(this.location.x,this.location.y,this.size,this.size)}}]),e}(),w=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){return e.graphicsContext.initialize(t.current)}),[]),i.a.createElement(i.a.Fragment,null,console.log("Rending graphics canvas"),i.a.createElement("div",{className:b.a.sketch,ref:t}))},x=a(11),E=a(190),O=a(187),D=a(186),M=a(183),S=a(51),j=a.n(S),_=a(78),A=a.n(_),T=(a(117),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={dial:null},n.dialRef=i.a.createRef(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.model,a=t.minValue,n=t.maxValue,i=t.defaultValue,r=t.step,s=t.parameter;this.setState({dial:new A.a.FLStandardKnob(this.dialRef.current,{min:a,max:n,initial:i,step:r,color:"#29DFF9"})},(function(){e.state.dial.addEventListener("change",(function(t){e.props.changeCallback(t),e.props.snackbarCallback("".concat(s," : ").concat(t.target.value))}))}))}},{key:"render",value:function(){return console.log("Rendering dial ".concat(this.props.model.parameter)),i.a.createElement("div",{ref:this.dialRef,className:"my-knob-container"})}}]),a}(n.Component)),R=a(179),V=a(26),N=a.n(V),F=i.a.memo((function(e){var t=e.snackbarCallback,a=e.sliders;return i.a.createElement("div",{style:{width:"100%",overflow:"hidden"}},i.a.createElement(R.a,{container:!0,justify:"center",alignItems:"center",spacing:2},a.map((function(e){return i.a.createElement(R.a,{key:e.sliderModel.id,item:!0,xs:3},i.a.createElement(T,{model:e.sliderModel,changeCallback:function(t){return e.sliderCallback(t.target.value)},snackbarCallback:t}))}))),i.a.createElement(R.a,{container:!0,justify:"center",alignItems:"center",spacing:2},a.map((function(e){return i.a.createElement(R.a,{className:N.a.sliderLabel,key:e.sliderModel.id,item:!0,xs:3},e.sliderModel.parameter)}))))})),P=1,I="#ffffff",G="#ffffff",L=3,B=!0,W=!0,z=!1,H=[0,2,7,11],q=("rgba(226,178,207,".concat(.7,")"),"rgba(203,129,174,".concat(.7,")"),"rgba(173,83,138,".concat(.7,")"),"rgba(111,20,75,".concat(.7,")"),function e(t,a,n,i,r,s){Object(o.a)(this,e),this.id=t,this.parameter=a,this.defaultValue=n,this.minValue=i,this.maxValue=r,this.step=s}),Y=new Map;Y.set("volume-slider",new q("volume-slider","Volume",.7,0,1,.01)),Y.set("pan-slider",new q("pan-slider","Pan",0,-1,1,.01)),Y.set("variance-slider",new q("variance-slider","Variance",1,0,1,.01)),Y.set("attack-slider",new q("attack-slider","Attack",.1,.01,1,.01)),Y.set("decay-slider",new q("decay-slider","Decay",.1,.01,1,.01)),Y.set("sustain-slider",new q("sustain-slider","Sustain",.8,.01,1,.01)),Y.set("release-slider",new q("release-slider","Release",1,.01,3,.01)),Y.set("mod-index-slider",new q("mod-index-slider","modIndex",5,0,10,.01)),Y.set("mod-ratio-slider",new q("mod-ratio-slider","modRatio",2,0,5,.01)),Y.set("mod-duration-slider",new q("mod-duration-slider","modDuration",1,0,3,.01)),Y.set("delay-time-slider",new q("delay-time-slider","Delay time",1,0,4,.01)),Y.set("delay-feedback-slider",new q("delay-feedback-slider","Feedback",.3,0,.99,.01)),Y.set("delay-mix-slider",new q("delay-mix-slider","Delay mix",.15,0,1,.01)),Y.set("reverb-mix-slider",new q("reverb-mix-slider","Reverb mix",.8,0,1,.01)),Y.set("arpeggiator-speed-slider",new q("arpeggiator-speed-slider","Speed",1.25,.5,2,.01)),Y.set("arpeggiator-octave-slider",new q("arpeggiator-octave-slider","Octaves",3,1,3,1));var U=i.a.memo((function(e){var t={snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:Y.get("volume-slider"),sliderCallback:function(t){return e.audioContext.setVolume(t)}},{sliderModel:Y.get("pan-slider"),sliderCallback:function(t){return e.audioContext.setPan(t)}},{sliderModel:Y.get("variance-slider"),sliderCallback:function(t){return e.audioContext.setVariance(t)}}]},a={snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:Y.get("attack-slider"),sliderCallback:function(t){return e.audioContext.setAttack(t)}},{sliderModel:Y.get("decay-slider"),sliderCallback:function(t){return e.audioContext.setDecay(t)}},{sliderModel:Y.get("sustain-slider"),sliderCallback:function(t){return e.audioContext.setSustain(t)}},{sliderModel:Y.get("release-slider"),sliderCallback:function(t){return e.audioContext.setRelease(t)}}]};return i.a.createElement(j.a,{className:N.a.sliderContainer,enableMouseEvents:!0,resistance:!0},i.a.createElement(F,t),i.a.createElement(F,a))})),X=a(13),J=(a(119),i.a.memo((function(e){var t=Object(n.useState)(H),a=Object(x.a)(t,2),r=a[0],s=a[1],o=Object(n.useCallback)((function(t){s((function(a){var n=(a.includes(t)?a.filter((function(e){return e!==t})):[].concat(Object(X.a)(a),[t])).sort((function(e,t){return e-t}));return e.keySelectionCallback(n),n}))}),[]);return i.a.createElement("div",null,console.log("rendering piano"),i.a.createElement("ul",{className:"set"},[{key:"c",type:"white"},{key:"cs",type:"black"},{key:"d",type:"white"},{key:"ds",type:"black"},{key:"e",type:"white"},{key:"f",type:"white"},{key:"fs",type:"black"},{key:"g",type:"white"},{key:"gs",type:"black"},{key:"a",type:"white"},{key:"as",type:"black"},{key:"b",type:"white"}].map((function(e,t){return i.a.createElement("li",{key:t,className:"".concat(e.key," ").concat(e.type," ").concat(r.includes(t)?"keySelected":""),onClick:function(e){return o(t)}})}))))}))),K=i.a.memo((function(e){var t={snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:Y.get("arpeggiator-speed-slider"),sliderCallback:function(t){return e.audioContext.setArpeggiatorSpeed(t)}},{sliderModel:Y.get("arpeggiator-octave-slider"),sliderCallback:function(t){return e.audioContext.setArpeggiatorOctaves(t)}}]},a={snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:Y.get("delay-time-slider"),sliderCallback:function(t){return e.audioContext.setDelayTime(t)}},{sliderModel:Y.get("delay-feedback-slider"),sliderCallback:function(t){return e.audioContext.setDelayFeedback(t)}},{sliderModel:Y.get("delay-mix-slider"),sliderCallback:function(t){return e.audioContext.setDelayMix(t)}},{sliderModel:Y.get("reverb-mix-slider"),sliderCallback:function(t){return e.audioContext.setReverbMix(t)}}]};return i.a.createElement(j.a,{className:N.a.sliderContainer,enableMouseEvents:!0,resistance:!0,animateHeight:!0},i.a.createElement(F,t),i.a.createElement(J,{keySelectionCallback:function(t){return e.audioContext.setArpeggiatorSemitones(t)}}),i.a.createElement(F,a))})),$=a(150),Q=a(192),Z=a(83),ee=a.n(Z),te=a(184),ae=a(191),ne=a(181),ie=a(182),re=a(188),se=i.a.memo((function(e){var t=ee()({overrides:{MuiSlider:{thumb:{color:"#29DFF9"},track:{color:"#29DFF9"}}}});return console.log("Rendering bottom drawer"),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:N.a.bottomDrawerSwitches},i.a.createElement(ae.a,null,i.a.createElement(ne.a,null,i.a.createElement(ie.a,{value:"displayAnimation",control:i.a.createElement(re.a,{color:"primary",defaultChecked:B,onChange:function(t){return e.graphicsContext.setDisplayAnimation(t.target.checked)}}),label:"Display animation",labelPlacement:"end"}),i.a.createElement(ie.a,{value:"displayWaveform",control:i.a.createElement(re.a,{color:"primary",defaultChecked:W,onChange:function(t){return e.graphicsContext.setDisplayWaveform(t.target.checked)}}),label:"Display waveform",labelPlacement:"end"}),i.a.createElement(ie.a,{value:"displayNotes",control:i.a.createElement(re.a,{color:"primary",defaultChecked:z,onChange:function(t){return e.toggleNoteInfoCallback(t.target.checked)}}),label:"Display Notes",labelPlacement:"end"})))),i.a.createElement(M.a,{variant:"middle"}),i.a.createElement("div",{className:N.a.bottomDrawerSliderSection},i.a.createElement("div",{className:N.a.bottomDrawerSliderAndLabelGroup},i.a.createElement($.a,{id:"current-octave-slider",gutterBottom:!0},"Current octave"),i.a.createElement(te.a,{theme:t},i.a.createElement(Q.a,{defaultValue:L,"aria-labelledby":"current-octave-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:7,onChangeCommitted:function(t,a){return e.audioContext.setCurrentOctave(a)}}))),i.a.createElement("div",{className:N.a.bottomDrawerSliderAndLabelGroup},i.a.createElement($.a,{id:"animation-speed-slider",gutterBottom:!0},"Animation speed"),i.a.createElement(te.a,{theme:t},i.a.createElement(Q.a,{defaultValue:P,"aria-labelledby":"animation-speed-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:5,onChangeCommitted:function(t,a){return e.graphicsContext.setAnimationSpeed(a)}})))))})),oe=i.a.memo((function(e){var t=i.a.createElement(i.a.Fragment,null,"Copyleft 2020 \xa0 \xa0 \xa0| \xa0 \xa0 \xa0   </> with <3 by ",i.a.createElement("a",{href:"https://github.com/Thrifleganger/cloud-inversion"},"Akash Murthy"));return i.a.createElement(i.a.Fragment,null,i.a.createElement(O.a,{onClose:e.toggleSliderDrawer(!1),onOpen:e.toggleSliderDrawer(!0),open:e.isSliderControllerOpen,swipeAreaWidth:150,anchor:"top",keepMounted:!0},i.a.createElement("div",{className:N.a.sliderDrawer},i.a.createElement(D.a,{maxWidth:"sm"},console.log("Rendering slider drawer"),i.a.createElement(U,{audioContext:e.audioContext,snackbarCallback:e.snackbarCallback}),i.a.createElement(M.a,{variant:"middle"}),i.a.createElement(K,{audioContext:e.audioContext,snackbarCallback:e.snackbarCallback}))),i.a.createElement("div",{className:N.a.drawerHandleTop})),i.a.createElement(O.a,{onClose:e.toggleBottomDrawer(!1),onOpen:e.toggleBottomDrawer(!0),open:e.isBottomDrawerOpen,swipeAreaWidth:50,anchor:"bottom",keepMounted:!0},i.a.createElement("div",{className:N.a.bottomDrawer},i.a.createElement("div",{className:N.a.drawerHandleBottom}),i.a.createElement(D.a,{maxWidth:"sm"},i.a.createElement(se,{audioContext:e.audioContext,graphicsContext:e.graphicsContext,toggleNoteInfoCallback:e.toggleNoteInfoCallback})),i.a.createElement("div",{className:N.a.textDeclaration},t))))})),le=a(37),ce=a.n(le),ue=a(84),de=a.n(ue),he=function(e){return i.a.createElement("div",{className:ce.a.splashScreen},i.a.createElement("div",{className:ce.a.splashScreenButton},i.a.createElement(de.a,{htmlColor:"#4b3092",fontSize:"large",onClick:e.startAudioContext})))},me=i.a.memo((function(){var e=i.a.createElement(i.a.Fragment,null,["C","C<sub>#</sub>","D","D<sub>#</sub>","E","F","F<sub>#</sub>","G","G<sub>#</sub>","A","A<sub>#</sub>","B"].map((function(e){return i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e},key:e})})));return i.a.createElement("div",{className:ce.a.notesInfoSection},e)})),pe=function(e){var t=Object(n.useState)(!1),a=Object(x.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),l=Object(x.a)(o,2),c=l[0],u=l[1],d=Object(n.useState)(!1),h=Object(x.a)(d,2),m=h[0],p=h[1],v=Object(n.useState)(""),y=Object(x.a)(v,2),f=y[0],b=y[1],g=Object(n.useState)(!1),k=Object(x.a)(g,2),C=k[0],w=k[1],O=Object(n.useState)(!1),D=Object(x.a)(O,2),M=D[0],S=D[1],j=Object(n.useCallback)((function(){e.audioContext.start(),w(!0)}),[]),_=Object(n.useCallback)((function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&s(e)}}),[]),A=Object(n.useCallback)((function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&u(e)}}),[]),T=Object(n.useCallback)((function(e){p(!0),b(e)}),[]),R=Object(n.useCallback)((function(e){return S(e)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(oe,{toggleSliderDrawer:_,isSliderControllerOpen:r,isBottomDrawerOpen:c,toggleBottomDrawer:A,audioContext:e.audioContext,graphicsContext:e.graphicsContext,snackbarCallback:T,toggleNoteInfoCallback:R}),i.a.createElement(E.a,{className:ce.a.snackbarLayout,open:m,autoHideDuration:3e3,onClose:function(){return p(!1)},message:f,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),M?i.a.createElement(me,null):"",C?"":i.a.createElement(he,{startAudioContext:j}))},ve=a(23),ye=function(e,t,a,n,i){return(e-t)*(i-n)/(a-t)+n},fe=function(e,t){return Math.floor(12*t+12+ye(e,0,window.innerWidth,0,12))},be=function(){function e(){var t=this;Object(o.a)(this,e),this.handleGenericTriggerEvent=function(e){t.instrument.triggerAttack(e,t.currentOctave)},this.handleGenericReleaseEvent=function(e){t.instrument.triggerRelease()},this.instrument=null,this.volume=Y.get("volume-slider").defaultValue,this.pan=Y.get("pan-slider").defaultValue,this.variance=Y.get("variance-slider").defaultValue,this.attack=Y.get("attack-slider").defaultValue,this.decay=Y.get("decay-slider").defaultValue,this.sustain=Y.get("sustain-slider").defaultValue,this.release=Y.get("release-slider").defaultValue,this.delayTime=Y.get("delay-time-slider").defaultValue,this.delayFeedback=Y.get("delay-feedback-slider").defaultValue,this.delayMix=Y.get("delay-mix-slider").defaultValue,this.reverbMix=Y.get("reverb-mix-slider").defaultValue,this.arpeggiatorSpeed=Y.get("arpeggiator-speed-slider").defaultValue,this.arpeggiatorOctaves=Y.get("arpeggiator-octave-slider").defaultValue,this.arpeggiatorSemitones=H,this.currentOctave=L}return Object(l.a)(e,[{key:"start",value:function(){console.log("Started audio context"),Object(ve.m)().then()}},{key:"initialize",value:function(e){console.log("Initializing audioContext"),this.instrument=e,this.instrument.initialize(this);var t=this.instrument.patch;t.volume=new ve.d(this.volume,"normalRange"),t.pan=new ve.g(this.pan),t.tone=new ve.c({type:"lowpass",frequency:100}),t.lfo=new ve.e(.1,300,1e4),t.lfo.start(),t.delay=new ve.i({delayTime:this.delayTime,maxDelayTime:4}),this.setDelayFeedback(this.delayFeedback),this.setDelayMix(this.delayMix),t.reverb=new ve.j(10),this.setReverbMix(this.reverbMix),t.mainChannel=new ve.a,t.reverbChannel=new ve.a,t.delayChannel=new ve.a,t.synth.connect(t.volume),t.volume.connect(t.pan),t.pan.connect(t.tone),t.lfo.connect(t.tone.frequency),t.tone.connect(t.mainChannel),t.mainChannel.send("delay-bus",-10),t.mainChannel.send("reverb-bus",-10),t.delayChannel.receive("delay-bus"),t.reverbChannel.receive("reverb-bus"),t.delayChannel.connect(t.delay),t.reverbChannel.connect(t.reverb);var a=new ve.d(1,"normalRange");t.delay.connect(a),t.reverb.connect(a),a.connect(ve.b)}},{key:"setVolume",value:function(e){this.volume=e,this.instrument.patch.volume.gain.value=e}},{key:"setPan",value:function(e){this.pan=e,this.instrument.patch.pan.pan.value=this.pan}},{key:"setVariance",value:function(e){this.variance=e,console.log(this.instrument.patch.lfo.min),this.instrument.patch.lfo.min=ye(this.variance,0,1,2e3,300),this.instrument.patch.lfo.max=ye(this.variance,0,1,2e3,1e4)}},{key:"setAttack",value:function(e){this.attack=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setDecay",value:function(e){this.decay=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setSustain",value:function(e){this.sustain=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setRelease",value:function(e){this.release=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setDelayTime",value:function(e){this.delayTime=e,this.instrument.patch.delay.delayTime.value=this.delayTime}},{key:"setDelayFeedback",value:function(e){this.delayFeedback=e,this.instrument.patch.delay.feedback.value=this.delayFeedback}},{key:"setDelayMix",value:function(e){this.delayMix=e,this.instrument.patch.delay.wet.value=this.delayMix}},{key:"setReverbMix",value:function(e){this.reverbMix=e,this.instrument.patch.reverb.wet.value=this.reverbMix}},{key:"setArpeggiatorSpeed",value:function(e){this.arpeggiatorSpeed=e,"arpeggiator"===this.instrument.id&&this.instrument.setPlaybackRate(e)}},{key:"setArpeggiatorOctaves",value:function(e){this.arpeggiatorOctaves=e,"arpeggiator"===this.instrument.id&&this.instrument.setOctaves(e)}},{key:"setArpeggiatorSemitones",value:function(e){this.arpeggiatorSemitones=e,"arpeggiator"===this.instrument.id&&this.instrument.setArpeggiatorSemitones(e)}},{key:"setCurrentOctave",value:function(e){this.currentOctave=e}}]),e}(),ge=a(15),ke=function e(){Object(o.a)(this,e),this.volume=null,this.pan=null,this.tone=null,this.synth=null,this.reverb=null,this.delay=null,this.envelope=null},Ce=function(){function e(){Object(o.a)(this,e),this.id="arpeggiator",this.patch=new ke,this.numberOfOctaves=null,this.playbackRate=null,this.semitones=null,this.audioContext=null}return Object(l.a)(e,[{key:"initialize",value:function(e){console.log("Initializing argpeggiator"),this.audioContext=e,this.patch.synth=new ve.k({oscillator:{type:"sawtooth"}}),this.patch.pattern=new ve.h({pattern:"upDown"}),this.patch.pattern.interval="16n",this.setEnvelope(e.attack,e.decay,e.sustain,e.release),this.playbackRate=e.arpeggiatorSpeed,this.numberOfOctaves=e.arpeggiatorOctaves,this.semitones=e.arpeggiatorSemitones}},{key:"triggerAttack",value:function(e,t){var a=this;ve.l.start();var n,i=this.patch,r=i.pattern,s=i.synth,o=[],l=Object(ge.a)(Array(Math.round(this.numberOfOctaves)).keys());try{var c=function(){var e=n.value;o=o.concat(a.semitones.map((function(t){return t+12*e})))};for(l.s();!(n=l.n()).done;)c()}catch(m){l.e(m)}finally{l.f()}var u,d=(u=e[0].y,ye(u,0,window.innerHeight,0,1));r.callback=function(e,t){return s.triggerAttackRelease(t,"16n",void 0,d)};var h=fe(e[0].x,t);r.values=o.map((function(e){return Math.floor(Object(ve.f)(e+h).toFrequency())})),r.playbackRate=this.playbackRate,r.start()}},{key:"triggerRelease",value:function(e){this.patch.pattern.stop(),ve.l.stop()}},{key:"setArpeggiatorSemitones",value:function(e){this.semitones=Object(X.a)(e)}},{key:"setOctaves",value:function(e){this.numberOfOctaves=e}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e,this.patch.pattern.playbackRate=e}},{key:"setEnvelope",value:function(e,t,a,n){var i=this.patch.synth.envelope;i.attack=e,i.decay=t,i.sustain=a,i.release=n}}]),e}(),we=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateWindowDimensions=function(){n.setState({width:window.innerWidth,height:window.innerHeight})},n.handleGenericPressEvent=function(e){n.props.audioContext.handleGenericTriggerEvent(e)},n.handleGenericReleasedEvent=function(e){n.props.audioContext.handleGenericReleaseEvent(e)},n.state={width:0,height:0},n.isTouchActivated=!1,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.props.audioContext.initialize(new Ce)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){var e=this,t={position:"absolute",left:0,top:0,height:this.state.height,width:this.state.width};return i.a.createElement("div",{style:t,onMouseDown:function(t){return e.handleGenericPressEvent([{x:t.clientX,y:t.clientY}])},onMouseUp:function(){return e.handleGenericReleasedEvent([])},onTouchStart:function(t){e.isTouchActivated||0!==t.targetTouches.length&&(e.isTouchActivated=!0,e.handleGenericPressEvent([{x:t.targetTouches.item(0).clientX,y:t.targetTouches.item(0).clientY}]))},onTouchEnd:function(t){0===t.targetTouches.length&&(e.isTouchActivated=!1,e.handleGenericReleasedEvent(t))}})}}]),a}(n.Component),xe=function(){function e(){var t=this;Object(o.a)(this,e),this.sketch=function(e){e.setup=function(){console.log("Setup"),e.createCanvas(e.windowWidth,e.windowHeight)},e.draw=function(){e.clear(),t.shouldDisplayAnimation&&(t.primeMovers.forEach((function(e){return e.update()})),t.secondaryMoverSystems.forEach((function(e){return e.update()})))},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight)},e.touchStarted=function(e){t.isTouchActivated||0!==e.targetTouches.length&&(t.isTouchActivated=!0,t.handleGenericPressEvent([{x:e.targetTouches.item(0).clientX,y:e.targetTouches.item(0).clientY}]))},e.mousePressed=function(e){t.handleGenericPressEvent([{x:e.x,y:e.y}])},e.touchEnded=function(e){0===e.targetTouches.length&&(t.isTouchActivated=!1,t.handleGenericReleasedEvent(e))},e.mouseReleased=function(){t.handleGenericReleasedEvent([])}},this.handleGenericPressEvent=function(e){t.shouldDisplayAnimation&&e.forEach((function(e){var a=Object(g.a)(),n=new y(a,e,t.myP5,t.previousPrimeMover,t.moverProperties);n.registerDestructionCallback((function(){return t.handlePrimeMoverDestruction(n)})),t.primeMovers.set(a,n),t.previousPrimeMover=n;var i=Object(g.a)(),r=new k(i,e,t.myP5,t.moverProperties);t.secondaryMoverSystems.set(i,r),r.registerDestructionCallback((function(){return t.handleSecondaryMoverSystemDestruction(r)}))}))},this.handleGenericReleasedEvent=function(e){t.shouldDisplayAnimation&&t.secondaryMoverSystems.forEach((function(e){return e.initiateDestruction()}))},this.myP5=null,this.primeMovers=new Map,this.secondaryMoverSystems=new Map,this.previousPrimeMover=null,this.isTouchActivated=!1,this.moverProperties={animationSpeed:P,primeMoverColor:I,secondaryMoverColor:G},this.shouldDisplayAnimation=!0,this.shouldDisplayWaveform=!0,this.shouldDisplayInfo=!1}return Object(l.a)(e,[{key:"initialize",value:function(e){this.myP5=new v.a(this.sketch,e)}},{key:"handlePrimeMoverDestruction",value:function(e){this.primeMovers.delete(e.id),e=null}},{key:"handleSecondaryMoverSystemDestruction",value:function(e){this.secondaryMoverSystems.delete(e.id),e=null}},{key:"setDisplayAnimation",value:function(e){this.shouldDisplayAnimation=e}},{key:"setDisplayWaveform",value:function(e){this.shouldDisplayWaveform=e}},{key:"setAnimationSpeed",value:function(e){this.moverProperties.animationSpeed=e}}]),e}(),Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).audioContext=new be,e.graphicsContext=new xe,e}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(we,{audioContext:this.audioContext}),i.a.createElement(w,{graphicsContext:this.graphicsContext}),i.a.createElement(m,null),i.a.createElement(pe,{audioContext:this.audioContext,graphicsContext:this.graphicsContext}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},26:function(e,t,a){e.exports={sliderDrawer:"Drawer_sliderDrawer__Kk8bO",sliderContainer:"Drawer_sliderContainer__1eL8v",sliderLabel:"Drawer_sliderLabel__HMnml",drawerHandleTop:"Drawer_drawerHandleTop__1VpNB",drawerHandleBottom:"Drawer_drawerHandleBottom__2T_0a",bottomDrawer:"Drawer_bottomDrawer__2m7uT",bottomDrawerSliderSection:"Drawer_bottomDrawerSliderSection__2UCan",bottomDrawerSliderAndLabelGroup:"Drawer_bottomDrawerSliderAndLabelGroup__eIFDx",textDeclaration:"Drawer_textDeclaration__2jYt_",bottomDrawerSwitches:"Drawer_bottomDrawerSwitches__1TTsN"}},37:function(e,t,a){e.exports={snackbarLayout:"MainLayout_snackbarLayout__347DF",splashScreen:"MainLayout_splashScreen__1nveC",splashScreenButton:"MainLayout_splashScreenButton__3o43a",notesInfoSection:"MainLayout_notesInfoSection__1S99L"}},64:function(e,t,a){e.exports={gradientBackground:"GradientBackground_gradientBackground__2-Fo7",gradient:"GradientBackground_gradient__mofCM"}},77:function(e,t,a){e.exports={sketch:"ProcessingSketch_sketch__cS6Hq"}},91:function(e,t,a){e.exports=a(148)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.517fa98f.chunk.js.map