(this["webpackJsonpswara-react-synth"]=this["webpackJsonpswara-react-synth"]||[]).push([[0],{117:function(e,t,a){e.exports=a(177)},122:function(e,t,a){},165:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(21),s=a.n(r),l=(a(122),a(1)),o=a(2),c=a(4),u=a(3),d=a(82),h=a.n(d),m=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return console.log("Rendering gradient"),i.a.createElement("div",{className:h.a.gradientBackground})}}]),a}(n.Component),p=a(99),v=a.n(p),f=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){return e.graphicsContext.initialize(t.current)}),[e.graphicsContext]),i.a.createElement(i.a.Fragment,null,console.log("Rending graphics canvas"),i.a.createElement("div",{className:v.a.sketch,ref:t}))},y=a(11),b=a(214),g=a(211),k=a(210),C=a(216),w=a(33),x=a(63),E=a.n(x),S=a(100),D=a.n(S),O=(a(142),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).dialRef=i.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.model,a=t.minValue,n=t.maxValue,i=t.defaultValue,r=t.step,s=t.parameter;new D.a.FLStandardKnob(this.dialRef.current,{min:a,max:n,initial:i,step:r,color:"#29DFF9"}).addEventListener("change",(function(t){e.props.changeCallback(t),e.props.snackbarCallback("".concat(s," : ").concat(t.target.value))}))}},{key:"render",value:function(){return console.log("Rendering dial ".concat(this.props.model.parameter)),i.a.createElement("div",{ref:this.dialRef})}}]),a}(n.Component)),M=a(205),_=a(24),j=a.n(_),A=i.a.memo((function(e){var t=e.snackbarCallback,a=e.sliders;return i.a.createElement("div",{style:{width:"100%",overflow:"hidden"}},i.a.createElement(M.a,{container:!0,justify:"center",alignItems:"center",spacing:2},a.map((function(e){return i.a.createElement(M.a,{key:e.sliderModel.id,item:!0,xs:3},i.a.createElement(O,{model:e.sliderModel,changeCallback:function(t){return e.sliderCallback(t.target.value)},snackbarCallback:t}))}))),i.a.createElement(M.a,{container:!0,justify:"center",alignItems:"center",spacing:2},a.map((function(e){return i.a.createElement(M.a,{className:j.a.sliderLabel,key:e.sliderModel.id,item:!0,xs:3},e.sliderModel.parameter)}))))})),T=2,I="#ffffff",P="#ffffff",N=3,R=!0,z=!1,F=!1,V=[0,2,7,11],G=function e(t,a,n,i,r,s){Object(l.a)(this,e),this.id=t,this.parameter=a,this.defaultValue=n,this.minValue=i,this.maxValue=r,this.step=s},L=new Map;L.set("volume-slider",new G("volume-slider","Volume",.7,0,1,.01)),L.set("pan-slider",new G("pan-slider","Pan",0,-1,1,.01)),L.set("variance-slider",new G("variance-slider","Variance",1,0,1,.01)),L.set("attack-slider",new G("attack-slider","Attack",.1,.01,1,.01)),L.set("decay-slider",new G("decay-slider","Decay",.1,.01,1,.01)),L.set("sustain-slider",new G("sustain-slider","Sustain",.8,.01,1,.01)),L.set("release-slider",new G("release-slider","Release",1,.01,3,.01)),L.set("mod-index-slider",new G("mod-index-slider","modIndex",5,0,10,.01)),L.set("mod-ratio-slider",new G("mod-ratio-slider","modRatio",2,0,5,.01)),L.set("mod-duration-slider",new G("mod-duration-slider","modDuration",1,0,3,.01)),L.set("delay-time-slider",new G("delay-time-slider","Delay time",1,0,4,.01)),L.set("delay-feedback-slider",new G("delay-feedback-slider","Feedback",.3,0,.99,.01)),L.set("delay-mix-slider",new G("delay-mix-slider","Delay mix",.15,0,1,.01)),L.set("reverb-mix-slider",new G("reverb-mix-slider","Reverb mix",.8,0,1,.01)),L.set("arpeggiator-speed-slider",new G("arpeggiator-speed-slider","Speed",1.25,.5,2,.01)),L.set("arpeggiator-octave-slider",new G("arpeggiator-octave-slider","Octaves",3,1,3,1));var B=a(70),W=a.n(B),H=i.a.memo((function(e){var t=Object(n.useMemo)((function(){return{snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:L.get("volume-slider"),sliderCallback:function(t){return e.audioContext.setVolume(t)}},{sliderModel:L.get("pan-slider"),sliderCallback:function(t){return e.audioContext.setPan(t)}},{sliderModel:L.get("variance-slider"),sliderCallback:function(t){return e.audioContext.setVariance(t)}}]}}),[e.snackbarCallback,e.audioContext]),a=Object(n.useMemo)((function(){return{snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:L.get("attack-slider"),sliderCallback:function(t){return e.audioContext.setAttack(t)}},{sliderModel:L.get("decay-slider"),sliderCallback:function(t){return e.audioContext.setDecay(t)}},{sliderModel:L.get("sustain-slider"),sliderCallback:function(t){return e.audioContext.setSustain(t)}},{sliderModel:L.get("release-slider"),sliderCallback:function(t){return e.audioContext.setRelease(t)}}]}}),[e.snackbarCallback,e.audioContext]);console.log("Rendering Controller A");var r=Object(n.useState)(0),s=Object(y.a)(r,2),l=s[0],o=s[1],c=Object(n.useCallback)((function(e){return o(e)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:j.a.relativeBox},i.a.createElement(E.a,{className:j.a.sliderContainer,enableMouseEvents:!0,resistance:!0,onChangeIndex:c},i.a.createElement(A,t),i.a.createElement(A,a)),i.a.createElement(W.a,{className:j.a.sliderPagination,count:2,index:l})))})),X=a(13),q=(a(165),i.a.memo((function(e){var t=Object(n.useState)(V),a=Object(y.a)(t,2),r=a[0],s=a[1],l=Object(n.useCallback)((function(t){s((function(a){var n=(a.includes(t)?a.filter((function(e){return e!==t})):[].concat(Object(X.a)(a),[t])).sort((function(e,t){return e-t}));return e.keySelectionCallback(n),n}))}),[]),o=0,c=Object(n.useCallback)((function(e){o=e.screenX}),[]),u=Object(n.useCallback)((function(e,t){Math.abs(e.screenX-o)>10?e.preventDefault():l(t),o=0}),[]);return i.a.createElement("div",null,console.log("rendering piano"),i.a.createElement("ul",{className:"set"},[{key:"c",type:"white"},{key:"cs",type:"black"},{key:"d",type:"white"},{key:"ds",type:"black"},{key:"e",type:"white"},{key:"f",type:"white"},{key:"fs",type:"black"},{key:"g",type:"white"},{key:"gs",type:"black"},{key:"a",type:"white"},{key:"as",type:"black"},{key:"b",type:"white"}].map((function(e,t){return i.a.createElement("li",{key:t,className:"".concat(e.key," ").concat(e.type," ").concat(r.includes(t)?"keySelected":""),onClick:function(e){return u(e,t)},onMouseDown:c})}))))}))),Y=i.a.memo((function(e){var t=Object(n.useMemo)((function(){return{snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:L.get("arpeggiator-speed-slider"),sliderCallback:function(t){return e.audioContext.setArpeggiatorSpeed(t)}},{sliderModel:L.get("arpeggiator-octave-slider"),sliderCallback:function(t){return e.audioContext.setArpeggiatorOctaves(t)}}]}}),[e.snackbarCallback,e.audioContext]),a=Object(n.useMemo)((function(){return{snackbarCallback:e.snackbarCallback,sliders:[{sliderModel:L.get("delay-time-slider"),sliderCallback:function(t){return e.audioContext.setDelayTime(t)}},{sliderModel:L.get("delay-feedback-slider"),sliderCallback:function(t){return e.audioContext.setDelayFeedback(t)}},{sliderModel:L.get("delay-mix-slider"),sliderCallback:function(t){return e.audioContext.setDelayMix(t)}},{sliderModel:L.get("reverb-mix-slider"),sliderCallback:function(t){return e.audioContext.setReverbMix(t)}}]}}),[e.snackbarCallback,e.audioContext]);console.log("Rendering Controller B");var r=Object(n.useState)(0),s=Object(y.a)(r,2),l=s[0],o=s[1],c=Object(n.useCallback)((function(e){return o(e)}),[]),u=Object(n.useCallback)((function(t){return e.audioContext.setArpeggiatorSemitones(t)}),[e.audioContext]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:j.a.relativeBox},i.a.createElement(E.a,{className:j.a.sliderContainer,enableMouseEvents:!0,resistance:!0,animateHeight:!0,onChangeIndex:c},i.a.createElement(A,t),i.a.createElement(q,{keySelectionCallback:u}),i.a.createElement(A,a)),i.a.createElement(W.a,{className:j.a.sliderPagination,count:3,index:l})))})),K=a(182),U=a(217),J=a(84),Z=a.n(J),$=a(207),Q=a(215),ee=a(208),te=a(209),ae=a(212),ne=i.a.memo((function(e){var t=Z()({overrides:{MuiSlider:{thumb:{color:"#29DFF9"},track:{color:"#baf0fc"},rail:{color:"#16191a"}}}});return console.log("Rendering bottom drawer"),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:j.a.bottomDrawerSwitches},i.a.createElement(Q.a,null,i.a.createElement(ee.a,null,i.a.createElement(te.a,{value:"displayAnimation",control:i.a.createElement(ae.a,{color:"primary",defaultChecked:R,onChange:function(t){return e.graphicsContext.setDisplayAnimation(t.target.checked)}}),label:"Display animation",labelPlacement:"end"}),i.a.createElement(te.a,{value:"displayWaveform",control:i.a.createElement(ae.a,{color:"primary",defaultChecked:z,onChange:function(t){e.audioContext.setDisplaySpectrum(t.target.checked),e.graphicsContext.setDisplaySpectrum(t.target.checked)}}),label:"Display waveform",labelPlacement:"end"}),i.a.createElement(te.a,{value:"displayNotes",control:i.a.createElement(ae.a,{color:"primary",defaultChecked:F,onChange:function(t){return e.toggleNoteInfoCallback(t.target.checked)}}),label:"Display Notes",labelPlacement:"end"})))),i.a.createElement(k.a,{variant:"middle"}),i.a.createElement("div",{className:j.a.bottomDrawerSliderSection},i.a.createElement("div",{className:j.a.bottomDrawerSliderAndLabelGroup},i.a.createElement(K.a,{id:"current-octave-slider",gutterBottom:!0},"Current octave"),i.a.createElement($.a,{theme:t},i.a.createElement(U.a,{defaultValue:N,"aria-labelledby":"current-octave-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:7,onChangeCommitted:function(t,a){return e.audioContext.setCurrentOctave(a)}}))),i.a.createElement("div",{className:j.a.bottomDrawerSliderAndLabelGroup},i.a.createElement(K.a,{id:"animation-speed-slider",gutterBottom:!0},"Animation speed"),i.a.createElement($.a,{theme:t},i.a.createElement(U.a,{defaultValue:T,"aria-labelledby":"animation-speed-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:5,onChangeCommitted:function(t,a){return e.graphicsContext.setAnimationSpeed(a)}})))))})),ie=a(86),re=i.a.memo((function(e){var t=i.a.createElement(i.a.Fragment,null,"Copyleft 2020 \xa0 \xa0 \xa0| \xa0 \xa0 \xa0   </> with <3 by ",i.a.createElement("a",{href:"https://github.com/Thrifleganger/swara-react-synth",target:"_blank"},"Akash Murthy")),a=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:j.a.sliderDrawer},i.a.createElement(g.a,{maxWidth:"sm"},i.a.createElement(H,{audioContext:e.audioContext,snackbarCallback:e.snackbarCallback}),i.a.createElement(k.a,{variant:"middle"}),i.a.createElement(Y,{audioContext:e.audioContext,snackbarCallback:e.snackbarCallback}))),i.a.createElement("div",{className:j.a.drawerHandleTop})),n=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:j.a.bottomDrawer},i.a.createElement("div",{className:j.a.drawerHandleBottom}),i.a.createElement(g.a,{maxWidth:"sm"},i.a.createElement(ne,{audioContext:e.audioContext,graphicsContext:e.graphicsContext,toggleNoteInfoCallback:e.toggleNoteInfoCallback})),i.a.createElement("div",{className:j.a.textDeclaration},t)));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.MobileView,null,i.a.createElement(C.a,{onClose:e.toggleSliderDrawer(!1),onOpen:e.toggleSliderDrawer(!0),open:e.isSliderControllerOpen,swipeAreaWidth:150,anchor:"top",keepMounted:!0},a),i.a.createElement(C.a,{onClose:e.toggleBottomDrawer(!1),onOpen:e.toggleBottomDrawer(!0),open:e.isBottomDrawerOpen,swipeAreaWidth:50,anchor:"bottom",keepMounted:!0},n)),i.a.createElement(ie.BrowserView,null,i.a.createElement(w.a,{onClose:e.toggleSliderDrawer(!1),open:e.isSliderControllerOpen,anchor:"top",keepMounted:!0},a),i.a.createElement(w.a,{onClose:e.toggleBottomDrawer(!1),open:e.isBottomDrawerOpen,anchor:"bottom",keepMounted:!0},n)))})),se=a(30),le=a.n(se),oe=a(104),ce=a.n(oe),ue=a(105),de=a.n(ue),he=a(106),me=a.n(he),pe=a(107),ve=a.n(pe),fe=function(e){return i.a.createElement("div",{className:le.a.splashScreen,onClick:e.startAudioContext},i.a.createElement("div",{className:le.a.splashScreenIconGrid},i.a.createElement("div",{className:le.a.splashScreenIconGridFlexbox},i.a.createElement("div",{className:le.a.splashScreenIconsHorizontal},i.a.createElement(ce.a,{htmlColor:"#6c739d",fontSize:"large"}),i.a.createElement(de.a,{htmlColor:"#786c9d",fontSize:"large"})),i.a.createElement("div",{className:le.a.splashScreenIconsHorizontal},i.a.createElement(me.a,{htmlColor:"#9d6c80",fontSize:"large"}),i.a.createElement(ve.a,{htmlColor:"#986c9d",fontSize:"large"})))),i.a.createElement("div",{className:le.a.splashScreenTitle},"{swara's}"),i.a.createElement("div",{className:le.a.splashScreenTitle2},"dreamscape"))},ye=i.a.memo((function(){var e=i.a.createElement(i.a.Fragment,null,["C","C<sub>#</sub>","D","D<sub>#</sub>","E","F","F<sub>#</sub>","G","G<sub>#</sub>","A","A<sub>#</sub>","B"].map((function(e){return i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e},key:e})})));return i.a.createElement("div",{className:le.a.notesInfoSection},e)})),be=a(108),ge=a.n(be),ke=a(109),Ce=a.n(ke),we=function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),r=a[0],s=a[1],l=Object(n.useState)(!1),o=Object(y.a)(l,2),c=o[0],u=o[1],d=Object(n.useState)(!1),h=Object(y.a)(d,2),m=h[0],p=h[1],v=Object(n.useState)(""),f=Object(y.a)(v,2),g=f[0],k=f[1],C=Object(n.useState)(!1),w=Object(y.a)(C,2),x=w[0],E=w[1],S=Object(n.useState)(!1),D=Object(y.a)(S,2),O=D[0],M=D[1],_=Object(n.useCallback)((function(){e.audioContext.start(),E(!0)}),[e.audioContext]),j=Object(n.useCallback)((function(e){return function(t){s(e)}}),[]),A=Object(n.useCallback)((function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&u(e)}}),[]),T=Object(n.useCallback)((function(e){p(!0),k(e)}),[]),I=Object(n.useCallback)((function(e){return M(e)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:le.a.topDrawerExpanderCue,onClick:j(!0)},i.a.createElement(ge.a,{fontSize:"small"})),i.a.createElement("div",{className:le.a.bottomDrawerExpanderCue,onClick:A(!0)},i.a.createElement(Ce.a,{fontSize:"small"})),i.a.createElement(re,{toggleSliderDrawer:j,isSliderControllerOpen:r,isBottomDrawerOpen:c,toggleBottomDrawer:A,audioContext:e.audioContext,graphicsContext:e.graphicsContext,snackbarCallback:T,toggleNoteInfoCallback:I}),i.a.createElement(b.a,{className:le.a.snackbarLayout,open:m,autoHideDuration:3e3,onClose:function(){return p(!1)},message:g,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),O?i.a.createElement(ye,null):"",x?"":i.a.createElement(fe,{startAudioContext:_}))},xe=a(23),Ee=function(e,t,a,n,i){return(e-t)*(i-n)/(a-t)+n},Se=function(e,t){return Math.floor(12*t+12+Ee(e,0,window.innerWidth,0,12))},De=function(){function e(){var t=this;Object(l.a)(this,e),this.handleGenericTriggerEvent=function(e){t.instrument.triggerAttack(e,t.currentOctave)},this.handleGenericReleaseEvent=function(e){t.instrument.triggerRelease()},this.instrument=null,this.fftAnalyzerCallbackInterval=null,this.fftAnalysisArray=[],this.volume=L.get("volume-slider").defaultValue,this.pan=L.get("pan-slider").defaultValue,this.variance=L.get("variance-slider").defaultValue,this.attack=L.get("attack-slider").defaultValue,this.decay=L.get("decay-slider").defaultValue,this.sustain=L.get("sustain-slider").defaultValue,this.release=L.get("release-slider").defaultValue,this.delayTime=L.get("delay-time-slider").defaultValue,this.delayFeedback=L.get("delay-feedback-slider").defaultValue,this.delayMix=L.get("delay-mix-slider").defaultValue,this.reverbMix=L.get("reverb-mix-slider").defaultValue,this.arpeggiatorSpeed=L.get("arpeggiator-speed-slider").defaultValue,this.arpeggiatorOctaves=L.get("arpeggiator-octave-slider").defaultValue,this.arpeggiatorSemitones=V,this.currentOctave=N}return Object(o.a)(e,[{key:"start",value:function(){console.log("Started audio context"),Object(xe.n)().then()}},{key:"initialize",value:function(e){var t=this;console.log("Initializing audioContext"),this.instrument=e,this.instrument.initialize(this);var a=this.instrument.patch;a.fftAnalyzer=new xe.a({size:256,type:"waveform",smoothing:.9}),a.volume=new xe.e(this.volume,"normalRange"),a.pan=new xe.h(this.pan),a.tone=new xe.d({type:"lowpass",frequency:100}),a.lfo=new xe.f(.1,300,1e4),a.lfo.start(),a.delay=new xe.j({delayTime:this.delayTime,maxDelayTime:4}),this.setDelayFeedback(this.delayFeedback),this.setDelayMix(this.delayMix),a.reverb=new xe.k(10),this.setReverbMix(this.reverbMix),a.mainChannel=new xe.b,a.reverbChannel=new xe.b,a.delayChannel=new xe.b,a.synth.connect(a.volume),a.volume.connect(a.pan),a.pan.connect(a.tone),a.lfo.connect(a.tone.frequency),a.tone.connect(a.mainChannel),a.mainChannel.send("delay-bus",-3),a.mainChannel.send("reverb-bus",-3),a.delayChannel.receive("delay-bus"),a.reverbChannel.receive("reverb-bus"),a.delayChannel.connect(a.delay),a.reverbChannel.connect(a.reverb);var n=new xe.e(1,"normalRange");a.delay.connect(n),a.reverb.connect(n),n.fan(xe.c),n.fan(a.fftAnalyzer),z&&(this.fftAnalyzerCallbackInterval=setInterval((function(){return t.fftAnalysisArray=a.fftAnalyzer.getValue()}),30))}},{key:"setVolume",value:function(e){this.volume=e,this.instrument.patch.volume.gain.value=e}},{key:"setPan",value:function(e){this.pan=e,this.instrument.patch.pan.pan.value=this.pan}},{key:"setVariance",value:function(e){this.variance=e,this.instrument.patch.lfo.min=Ee(this.variance,0,1,2e3,300),this.instrument.patch.lfo.max=Ee(this.variance,0,1,2e3,1e4)}},{key:"setAttack",value:function(e){this.attack=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setDecay",value:function(e){this.decay=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setSustain",value:function(e){this.sustain=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setRelease",value:function(e){this.release=e,this.instrument.setEnvelope(this.attack,this.decay,this.sustain,this.release)}},{key:"setDelayTime",value:function(e){this.delayTime=e,this.instrument.patch.delay.delayTime.value=this.delayTime}},{key:"setDelayFeedback",value:function(e){this.delayFeedback=e,this.instrument.patch.delay.feedback.value=this.delayFeedback}},{key:"setDelayMix",value:function(e){this.delayMix=e,this.instrument.patch.delay.wet.value=this.delayMix}},{key:"setReverbMix",value:function(e){this.reverbMix=e,this.instrument.patch.reverb.wet.value=this.reverbMix}},{key:"setArpeggiatorSpeed",value:function(e){this.arpeggiatorSpeed=e,"arpeggiator"===this.instrument.id&&this.instrument.setPlaybackRate(e)}},{key:"setArpeggiatorOctaves",value:function(e){this.arpeggiatorOctaves=e,"arpeggiator"===this.instrument.id&&this.instrument.setOctaves(e)}},{key:"setArpeggiatorSemitones",value:function(e){this.arpeggiatorSemitones=e,"arpeggiator"===this.instrument.id&&this.instrument.setArpeggiatorSemitones(e)}},{key:"setCurrentOctave",value:function(e){this.currentOctave=e}},{key:"setDisplaySpectrum",value:function(e){var t=this;!1===e&&null!==this.fftAnalyzerCallbackInterval?clearInterval(this.fftAnalyzerCallbackInterval):this.fftAnalyzerCallbackInterval=setInterval((function(){return t.fftAnalysisArray=t.instrument.patch.fftAnalyzer.getValue()}),60)}},{key:"getFftBuffer",value:function(){return this.fftAnalysisArray}}]),e}(),Oe=a(15),Me=function e(){Object(l.a)(this,e),this.volume=null,this.pan=null,this.tone=null,this.synth=null,this.reverb=null,this.delay=null,this.envelope=null},_e=function(){function e(){Object(l.a)(this,e),this.id="arpeggiator",this.patch=new Me,this.numberOfOctaves=null,this.playbackRate=null,this.semitones=null,this.audioContext=null}return Object(o.a)(e,[{key:"initialize",value:function(e){console.log("Initializing argpeggiator"),this.audioContext=e,this.patch.synth=new xe.l({oscillator:{type:"sawtooth"}}),this.patch.pattern=new xe.i({pattern:"upDown"}),this.patch.pattern.interval="16n",this.setEnvelope(e.attack,e.decay,e.sustain,e.release),this.playbackRate=e.arpeggiatorSpeed,this.numberOfOctaves=e.arpeggiatorOctaves,this.semitones=e.arpeggiatorSemitones}},{key:"triggerAttack",value:function(e,t){var a=this;xe.m.start();var n,i=this.patch,r=i.pattern,s=i.synth,l=[],o=Object(Oe.a)(Array(Math.round(this.numberOfOctaves)).keys());try{var c=function(){var e=n.value;l=l.concat(a.semitones.map((function(t){return t+12*e})))};for(o.s();!(n=o.n()).done;)c()}catch(m){o.e(m)}finally{o.f()}var u,d=(u=e[0].y,Ee(u,0,window.innerHeight,0,1));r.callback=function(e,t){return s.triggerAttackRelease(t,"16n",void 0,d)};var h=Se(e[0].x,t);r.values=l.map((function(e){return Math.floor(Object(xe.g)(e+h).toFrequency())})),r.playbackRate=this.playbackRate,r.start()}},{key:"triggerRelease",value:function(e){this.patch.pattern.stop(),xe.m.stop()}},{key:"setArpeggiatorSemitones",value:function(e){this.semitones=Object(X.a)(e)}},{key:"setOctaves",value:function(e){this.numberOfOctaves=e}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e,this.patch.pattern.playbackRate=e}},{key:"setEnvelope",value:function(e,t,a,n){var i=this.patch.synth.envelope;i.attack=e,i.decay=t,i.sustain=a,i.release=n}}]),e}(),je=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateWindowDimensions=function(){n.setState({width:window.innerWidth,height:window.innerHeight})},n.handleGenericPressEvent=function(e){n.props.audioContext.handleGenericTriggerEvent(e)},n.handleGenericReleasedEvent=function(e){n.props.audioContext.handleGenericReleaseEvent(e)},n.state={width:0,height:0},n.isTouchActivated=!1,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.props.audioContext.initialize(new _e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){var e=this,t={position:"absolute",left:0,top:0,height:this.state.height,width:this.state.width};return i.a.createElement("div",{style:t,onMouseDown:function(t){return e.handleGenericPressEvent([{x:t.clientX,y:t.clientY}])},onMouseUp:function(){return e.handleGenericReleasedEvent([])},onTouchStart:function(t){e.isTouchActivated||0!==t.targetTouches.length&&(e.isTouchActivated=!0,e.handleGenericPressEvent([{x:t.targetTouches.item(0).clientX,y:t.targetTouches.item(0).clientY}]))},onTouchEnd:function(t){0===t.targetTouches.length&&(e.isTouchActivated=!1,e.handleGenericReleasedEvent(t))}})}}]),a}(n.Component),Ae=a(110),Te=a.n(Ae),Ie=function(){function e(t,a,n,i,r){Object(l.a)(this,e),this.p5=n,this.id=t,this.location=n.createVector(a.x,a.y),this.velocity=n.createVector(0,-r.animationSpeed),this.connectionThreshold=n.height/2,this.previousMover=i,this.properties=r}return Object(o.a)(e,[{key:"update",value:function(){this.location.add(this.velocity),this.isOutOfCanvas()?this.destroyCallback():(this.display(),this.drawConnection())}},{key:"isOutOfCanvas",value:function(){return this.location.y<0}},{key:"display",value:function(){this.p5.noStroke(),this.p5.fill(this.properties.primeMoverColor);var e=this.p5.height,t=this.p5.map(this.location.y,0,e,10,50);this.p5.ellipse(this.location.x,this.location.y,t,t)}},{key:"registerDestructionCallback",value:function(e){this.destroyCallback=e}},{key:"drawConnection",value:function(){if(null!=this.previousMover){var e=this.previousMover.location,t=e.x,a=e.y;if(Math.abs(this.location.y-a)>this.connectionThreshold)this.previousMover=null;else{this.p5.stroke(this.properties.primeMoverColor),this.p5.noFill(),this.p5.strokeWeight(1.5);var n=(this.location.x-t)/2,i=(this.location.y-a)/2;i<50&&(i=this.p5.random(-50,50)),n<50&&(n=this.p5.random(-50,50)),this.p5.bezier(this.location.x,this.location.y,this.location.x-this.p5.random(0,n),this.location.y-this.p5.random(0,i),t+this.p5.random(0,n),a+this.p5.random(0,i),t,a)}}}}]),e}(),Pe=a(213),Ne=function(){function e(t,a,n,i){var r=this;Object(l.a)(this,e),this.p5=n,this.id=t,this.coordinates=a,this.secondaryMovers=new Map,this.destroyCallback=null,this.destructionInitiated=!1,this.intervalId=setInterval((function(){var e=Object(Pe.a)();r.secondaryMovers.set(e,new Re(e,a.x,n,i.animationSpeed,i.secondaryMoverColor,(function(e){return r.deleteMover(e)})))}),Number.parseInt(n.random(30,150)))}return Object(o.a)(e,[{key:"update",value:function(){0===this.secondaryMovers.length&&this.destructionInitiated&&this.destroyCallback(),this.secondaryMovers.forEach((function(e){return e.update()}))}},{key:"deleteMover",value:function(e){this.secondaryMovers.delete(e.id),e=null}},{key:"registerDestructionCallback",value:function(e){this.destroyCallback=e}},{key:"initiateDestruction",value:function(){clearInterval(this.intervalId),this.destructionInitiated=!0}}]),e}(),Re=function(){function e(t,a,n,i,r,s){Object(l.a)(this,e),this.id=t,this.p5=n,this.deleteCallback=s;var o=-i*n.random(2,4);this.size=n.random(.01*n.width,.05*n.width),this.location=n.createVector(n.random(a-.0625*n.width,a+.0625*n.width),n.height+20),this.velocity=n.createVector(0,o),this.color=r,this.alpha=Number.parseInt(n.random(50,200))}return Object(o.a)(e,[{key:"update",value:function(){this.location.add(this.velocity),this.isOutOfCanvas()?this.deleteCallback(this):this.display()}},{key:"isOutOfCanvas",value:function(){return this.location.y<0}},{key:"display",value:function(){this.p5.noStroke(),this.p5.fill(this.p5.color(this.p5.red(this.color),this.p5.green(this.color),this.p5.blue(this.color),this.alpha)),this.p5.ellipse(this.location.x,this.location.y,this.size,this.size)}}]),e}(),ze=function(){function e(){var t=this;Object(l.a)(this,e),this.sketch=function(e){e.setup=function(){console.log("Setup"),e.createCanvas(e.windowWidth,e.windowHeight)},e.draw=function(){e.clear(),t.shouldDisplayAnimation&&(t.primeMovers.forEach((function(e){return e.update()})),t.secondaryMoverSystems.forEach((function(e){return e.update()}))),t.shouldDisplaySpectrum&&t.displayWaveform()},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight)},e.touchStarted=function(e){t.isTouchActivated||0!==e.targetTouches.length&&(t.isTouchActivated=!0,t.handleGenericPressEvent([{x:e.targetTouches.item(0).clientX,y:e.targetTouches.item(0).clientY}]))},e.mousePressed=function(e){t.handleGenericPressEvent([{x:e.x,y:e.y}])},e.touchEnded=function(e){0===e.targetTouches.length&&(t.isTouchActivated=!1,t.handleGenericReleasedEvent(e))},e.mouseReleased=function(){t.handleGenericReleasedEvent([])}},this.handleGenericPressEvent=function(e){t.shouldDisplayAnimation&&e.forEach((function(e){var a=Object(Pe.a)(),n=new Ie(a,e,t.myP5,t.previousPrimeMover,t.moverProperties);n.registerDestructionCallback((function(){return t.handlePrimeMoverDestruction(n)})),t.primeMovers.set(a,n),t.previousPrimeMover=n;var i=Object(Pe.a)(),r=new Ne(i,e,t.myP5,t.moverProperties);t.secondaryMoverSystems.set(i,r),r.registerDestructionCallback((function(){return t.handleSecondaryMoverSystemDestruction(r)}))}))},this.handleGenericReleasedEvent=function(e){t.shouldDisplayAnimation&&t.secondaryMoverSystems.forEach((function(e){return e.initiateDestruction()}))},this.myP5=null,this.audioContext=null,this.primeMovers=new Map,this.secondaryMoverSystems=new Map,this.previousPrimeMover=null,this.isTouchActivated=!1,this.moverProperties={animationSpeed:T,primeMoverColor:I,secondaryMoverColor:P},this.shouldDisplayAnimation=R,this.shouldDisplaySpectrum=z,this.shouldDisplayInfo=F}return Object(o.a)(e,[{key:"initialize",value:function(e){this.myP5=new Te.a(this.sketch,e)}},{key:"handlePrimeMoverDestruction",value:function(e){this.primeMovers.delete(e.id),e=null}},{key:"handleSecondaryMoverSystemDestruction",value:function(e){this.secondaryMoverSystems.delete(e.id),e=null}},{key:"displaySpectrum",value:function(){var e=this.audioContext.getFftBuffer();if(null!==e&&0!==e.length){var t=this.myP5,a=t.width,n=t.height,i=e.length;this.myP5.noStroke(),this.myP5.fill(255,255,255,40);for(var r=a/i,s=0;s<i;s++){var l=Math.floor(Ee(s,0,i,0,a));this.myP5.rect(l,n-Ee(e[s],-120,0,0,n),r,n,20)}}}},{key:"displayWaveform",value:function(){var e=this.audioContext.getFftBuffer();if(null!==e&&0!==e.length){var t=this.myP5,a=t.width,n=t.height,i=e.length;this.myP5.stroke(255),this.myP5.strokeWeight(1),this.myP5.beginShape(),this.myP5.fill(255,255,255,80);for(var r=0;r<i;r++){var s=Math.floor(Ee(r,0,i,0,a));this.myP5.vertex(s,n/2+Ee(e[r],-1,1,-n,n))}this.myP5.endShape()}}},{key:"setAudioContext",value:function(e){this.audioContext=e}},{key:"setDisplayAnimation",value:function(e){this.shouldDisplayAnimation=e}},{key:"setDisplaySpectrum",value:function(e){this.shouldDisplaySpectrum=e}},{key:"setAnimationSpeed",value:function(e){this.moverProperties.animationSpeed=e}}]),e}(),Fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).audioContext=new De,e.graphicsContext=new ze,e.graphicsContext.setAudioContext(e.audioContext),e}return Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(je,{audioContext:this.audioContext}),i.a.createElement(f,{graphicsContext:this.graphicsContext}),i.a.createElement(m,null),i.a.createElement(we,{audioContext:this.audioContext,graphicsContext:this.graphicsContext}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},24:function(e,t,a){e.exports={sliderDrawer:"Drawer_sliderDrawer__Kk8bO",sliderContainer:"Drawer_sliderContainer__1eL8v",sliderLabel:"Drawer_sliderLabel__HMnml",sliderPagination:"Drawer_sliderPagination__3fxG4",relativeBox:"Drawer_relativeBox__11ZmI",drawerHandleTop:"Drawer_drawerHandleTop__1VpNB",drawerHandleBottom:"Drawer_drawerHandleBottom__2T_0a",bottomDrawer:"Drawer_bottomDrawer__2m7uT",bottomDrawerSliderSection:"Drawer_bottomDrawerSliderSection__2UCan",bottomDrawerSliderAndLabelGroup:"Drawer_bottomDrawerSliderAndLabelGroup__eIFDx",textDeclaration:"Drawer_textDeclaration__2jYt_",bottomDrawerSwitches:"Drawer_bottomDrawerSwitches__1TTsN"}},30:function(e,t,a){e.exports={snackbarLayout:"MainLayout_snackbarLayout__347DF",splashScreen:"MainLayout_splashScreen__1nveC",splashScreenIconGrid:"MainLayout_splashScreenIconGrid__3x-nh",splashScreenIconGridFlexbox:"MainLayout_splashScreenIconGridFlexbox__22Py1",splashScreenIconsHorizontal:"MainLayout_splashScreenIconsHorizontal__ifxLt",splashScreenTitle:"MainLayout_splashScreenTitle__3j6zu",splashScreenTitle2:"MainLayout_splashScreenTitle2__NLD8D",notesInfoSection:"MainLayout_notesInfoSection__1S99L",topDrawerExpanderCue:"MainLayout_topDrawerExpanderCue__1Kzxs",bottomDrawerExpanderCue:"MainLayout_bottomDrawerExpanderCue__1_jpC"}},82:function(e,t,a){e.exports={gradientBackground:"GradientBackground_gradientBackground__2-Fo7",gradient:"GradientBackground_gradient__mofCM"}},99:function(e,t,a){e.exports={sketch:"ProcessingSketch_sketch__cS6Hq"}}},[[117,1,2]]]);
//# sourceMappingURL=main.1281875d.chunk.js.map