{"version":3,"sources":["components/layout/GradientBackground.js","components/graphics/PrimeMover.js","components/graphics/SecondaryMoverSystem.js","components/layout/GraphicsCanvas.js","components/controller/Dial.js","components/controller/Controller.js","components/util/InitializationConstants.js","components/layout/ControllerALayout.js","components/layout/PianoLayout.js","components/layout/ControllerBLayout.js","components/layout/BottomDrawer.js","components/layout/ControllerDrawer.js","components/layout/SplashScreen.js","components/layout/NoteInfo.js","components/layout/MainLayout.js","components/util/Util.js","components/audio/AudioContext.js","components/audio/AudioPatch.js","components/audio/Arpeggiator.js","components/layout/AudioCanvas.js","components/graphics/GraphicsContext.js","App.js","serviceWorker.js","index.js","styles/layout/Drawer.module.css","styles/layout/MainLayout.module.css","styles/layout/GradientBackground.module.css","styles/ProcessingSketch.module.css"],"names":["GradientBackground","console","log","className","styles","gradientBackground","Component","PrimeMover","id","coordinates","p5","previousMover","properties","this","location","createVector","x","y","velocity","animationSpeed","connectionThreshold","height","add","isOutOfCanvas","destroyCallback","display","drawConnection","noStroke","fill","primeMoverColor","size","map","ellipse","prevX","prevY","Math","abs","stroke","noFill","strokeWeight","diffX","diffY","random","bezier","SecondaryMoverSystem","secondaryMovers","Map","destructionInitiated","intervalId","setInterval","moverId","uuid","set","SecondaryMover","secondaryMoverColor","mover","deleteMover","Number","parseInt","length","forEach","update","delete","clearInterval","speed","color","deleteCallback","initialSpeed","width","alpha","red","green","blue","GraphicsCanvas","props","canvasRef","useRef","useEffect","graphicsContext","initialize","current","sketch","ref","Dial","state","dial","dialRef","React","createRef","model","minValue","maxValue","defaultValue","step","parameter","setState","PrecisionInputs","FLStandardKnob","min","max","initial","addEventListener","event","changeCallback","snackbarCallback","target","value","memo","sliders","style","overflow","Grid","container","justify","alignItems","spacing","slider","key","sliderModel","item","xs","sliderCallback","sliderLabel","initializationConstants","SliderModel","sliderModels","globalController","get","audioContext","setVolume","setPan","setVariance","envelopeController","setAttack","setDecay","setSustain","setRelease","sliderContainer","enableMouseEvents","resistance","useState","keysActivated","setKeysActivated","keySelectHandler","useCallback","index","prevState","sortedKeysArray","includes","filter","i","sort","a","b","keySelectionCallback","type","k","onClick","arpeggiatorController","setArpeggiatorSpeed","setArpeggiatorOctaves","auxEffectsController","setDelayTime","setDelayFeedback","setDelayMix","setReverbMix","animateHeight","keysArray","setArpeggiatorSemitones","horizontalSliderTheme","createMuiTheme","overrides","MuiSlider","thumb","track","bottomDrawerSwitches","FormControl","FormGroup","FormControlLabel","control","Switch","defaultChecked","onChange","setDisplayAnimation","checked","label","labelPlacement","setDisplayWaveform","toggleNoteInfoCallback","Divider","variant","bottomDrawerSliderSection","bottomDrawerSliderAndLabelGroup","Typography","gutterBottom","ThemeProvider","theme","Slider","aria-labelledby","valueLabelDisplay","marks","onChangeCommitted","_","setCurrentOctave","setAnimationSpeed","textDeclaration","href","SwipeableDrawer","onClose","toggleSliderDrawer","onOpen","open","isSliderControllerOpen","swipeAreaWidth","anchor","keepMounted","sliderDrawer","Container","maxWidth","drawerHandleTop","toggleBottomDrawer","isBottomDrawerOpen","bottomDrawer","drawerHandleBottom","SplashScreen","splashScreen","splashScreenButton","htmlColor","fontSize","startAudioContext","notesInfo","note","dangerouslySetInnerHTML","__html","notesInfoSection","MainLayout","setSliderControllerOpen","setBottomDrawerOpen","isSnackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","isAppLoaded","setAppLoaded","shouldDisplayInfo","setDisplayInfo","start","isOpen","message","Snackbar","snackbarLayout","autoHideDuration","anchorOrigin","vertical","horizontal","rangeMap","x1","y1","x2","y2","convertXToNoteNumber","currentOctave","floor","window","innerWidth","AudioContext","handleGenericTriggerEvent","instrument","triggerAttack","handleGenericReleaseEvent","triggerRelease","volume","pan","variance","attack","decay","sustain","release","delayTime","delayFeedback","delayMix","reverbMix","arpeggiatorSpeed","arpeggiatorOctaves","arpeggiatorSemitones","then","patch","Gain","Panner","tone","Filter","frequency","lfo","LFO","delay","PingPongDelay","maxDelayTime","reverb","Reverb","mainChannel","Channel","reverbChannel","delayChannel","synth","connect","send","receive","finalOutputNode","Destination","gain","setEnvelope","feedback","mix","wet","setPlaybackRate","octaves","setOctaves","semitonesArray","Patch","envelope","Arpeggiator","numberOfOctaves","playbackRate","semitones","Synth","oscillator","pattern","Pattern","interval","Transport","notes","Array","round","keys","concat","innerHeight","callback","time","triggerAttackRelease","undefined","midiNoteNumber","values","Midi","toFrequency","stop","array","env","AudioCanvas","updateWindowDimensions","handleGenericPressEvent","handleGenericReleasedEvent","isTouchActivated","removeEventListener","position","left","top","onMouseDown","clientX","clientY","onMouseUp","onTouchStart","targetTouches","onTouchEnd","GraphicsContext","p","setup","createCanvas","windowWidth","windowHeight","draw","clear","shouldDisplayAnimation","primeMovers","primeMover","secondaryMoverSystems","system","windowResized","resizeCanvas","touchStarted","mousePressed","touchEnded","mouseReleased","coordinate","primaryMoverId","myP5","previousPrimeMover","moverProperties","registerDestructionCallback","handlePrimeMoverDestruction","secondaryMoverSystemId","secondaryMoverSystem","handleSecondaryMoverSystemDestruction","initiateDestruction","shouldDisplayWaveform","domReference","App","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","module","exports"],"mappings":"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","file":"static/js/main.0e03d7eb.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport styles from '../../styles/layout/GradientBackground.module.css';\r\n\r\nclass GradientBackground extends Component {\r\n  render() {\r\n    console.log(\"Rendering gradient\")\r\n    return (\r\n      <div className={styles.gradientBackground}/>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GradientBackground;","class PrimeMover {\r\n\r\n  constructor(id, coordinates, p5, previousMover, properties) {\r\n    this.p5 = p5;\r\n    this.id = id;\r\n    this.location = p5.createVector(coordinates.x, coordinates.y);\r\n    this.velocity = p5.createVector(0, - properties.animationSpeed);\r\n    this.connectionThreshold = p5.height/2;\r\n    this.previousMover = previousMover;\r\n    this.properties = properties;\r\n  }\r\n\r\n  update() {\r\n    this.location.add(this.velocity);\r\n    if (this.isOutOfCanvas()) {\r\n      this.destroyCallback();\r\n    } else {\r\n      this.display();\r\n      this.drawConnection()\r\n    }\r\n  }\r\n\r\n  isOutOfCanvas() {\r\n    return this.location.y < 0;\r\n  }\r\n\r\n  display() {\r\n    this.p5.noStroke();\r\n    this.p5.fill(this.properties.primeMoverColor);\r\n    const {height} = this.p5;\r\n    const size = this.p5.map(this.location.y, 0, height, 10, 50);\r\n    this.p5.ellipse(this.location.x, this.location.y, size, size);\r\n  }\r\n\r\n  registerDestructionCallback(destroyCallback) {\r\n    this.destroyCallback = destroyCallback;\r\n  }\r\n\r\n  drawConnection() {\r\n    if (this.previousMover == null) {\r\n      return;\r\n    }\r\n    const {x:prevX, y:prevY} = this.previousMover.location\r\n    if (Math.abs(this.location.y - prevY) > this.connectionThreshold) {\r\n      this.previousMover = null;\r\n      return;\r\n    }\r\n    this.p5.stroke(this.properties.primeMoverColor);\r\n    this.p5.noFill();\r\n    this.p5.strokeWeight(1.5);\r\n    let diffX = (this.location.x - prevX)/2;\r\n    let diffY = (this.location.y - prevY)/2;\r\n    if(diffY < 50) diffY = this.p5.random(-50, 50);\r\n    if(diffX < 50) diffX = this.p5.random(-50, 50);\r\n    this.p5.bezier(\r\n      this.location.x, this.location.y,\r\n      this.location.x - this.p5.random(0,diffX), this.location.y - this.p5.random(0,diffY),\r\n      prevX + this.p5.random(0,diffX), prevY + this.p5.random(0,diffY),\r\n      prevX, prevY);\r\n  }\r\n}\r\n\r\nexport default PrimeMover;","import {v4 as uuid} from 'uuid'\r\n\r\nclass SecondaryMoverSystem {\r\n\r\n  constructor(id, coordinates, p5, properties) {\r\n    this.p5 = p5;\r\n    this.id = id;\r\n    this.coordinates = coordinates;\r\n    this.secondaryMovers = new Map();\r\n    this.destroyCallback = null;\r\n    this.destructionInitiated = false;\r\n\r\n    this.intervalId = setInterval(() => {\r\n      const moverId = uuid();\r\n      this.secondaryMovers.set(moverId, new SecondaryMover(\r\n        moverId,\r\n        coordinates.x,\r\n        p5,\r\n        properties.animationSpeed,\r\n        properties.secondaryMoverColor,\r\n        (mover) => this.deleteMover(mover)));\r\n    }, Number.parseInt(p5.random(30, 150)));\r\n  }\r\n\r\n  update() {\r\n    if (this.secondaryMovers.length === 0 && this.destructionInitiated) {\r\n      this.destroyCallback();\r\n    }\r\n    this.secondaryMovers.forEach(mover => mover.update());\r\n  }\r\n\r\n  deleteMover(mover) {\r\n    this.secondaryMovers.delete(mover.id);\r\n    mover = null;\r\n  }\r\n\r\n  registerDestructionCallback(destroyCallback) {\r\n    this.destroyCallback = destroyCallback;\r\n  }\r\n\r\n  initiateDestruction() {\r\n    clearInterval(this.intervalId);\r\n    this.destructionInitiated = true;\r\n  }\r\n}\r\n\r\nexport default SecondaryMoverSystem;\r\n\r\nclass SecondaryMover {\r\n\r\n  constructor(id, x, p5, speed, color, deleteCallback) {\r\n    this.id = id;\r\n    this.p5 = p5;\r\n    this.deleteCallback = deleteCallback;\r\n    let initialSpeed = - speed * p5.random(2,4);\r\n    this.size = p5.random(p5.width * 0.01, p5.width * 0.05);\r\n    this.location = p5.createVector(p5.random(x - (p5.width * 0.0625), x + (p5.width * 0.0625)), p5.height + 20)\r\n    this.velocity = p5.createVector(0, initialSpeed);\r\n    this.color = color;\r\n    this.alpha = Number.parseInt(p5.random(50, 200));\r\n  }\r\n\r\n  update() {\r\n    this.location.add(this.velocity);\r\n    if (this.isOutOfCanvas()) {\r\n      this.deleteCallback(this);\r\n    } else {\r\n      this.display();\r\n    }\r\n  }\r\n\r\n  isOutOfCanvas() {\r\n    return this.location.y < 0;\r\n  }\r\n\r\n  display() {\r\n    this.p5.noStroke();\r\n    this.p5.fill(this.p5.color(\r\n      this.p5.red(this.color),\r\n      this.p5.green(this.color),\r\n      this.p5.blue(this.color),\r\n      this.alpha)\r\n    );\r\n    this.p5.ellipse(this.location.x, this.location.y, this.size, this.size);\r\n  }\r\n}","import React, {Component, useEffect, useRef} from 'react';\r\nimport p5 from 'p5';\r\nimport PrimeMover from \"../graphics/PrimeMover\";\r\nimport styles from '../../styles/ProcessingSketch.module.css'\r\nimport {v4 as uuid} from 'uuid'\r\nimport SecondaryMoverSystem from \"../graphics/SecondaryMoverSystem\";\r\n\r\nconst GraphicsCanvas = (props) => {\r\n\r\n  const canvasRef = useRef(null);\r\n\r\n  useEffect(() => props.graphicsContext.initialize(canvasRef.current), []);\r\n\r\n  return (\r\n    <>\r\n      {console.log(\"Rending graphics canvas\")}\r\n      <div className={styles.sketch} ref={canvasRef}/>\r\n    </>\r\n  )\r\n\r\n}\r\n\r\nexport default GraphicsCanvas;","import React, {Component} from 'react';\r\nimport PrecisionInputs from 'precision-inputs/common/precision-inputs.fl-controls';\r\nimport \"precision-inputs/css/precision-inputs.fl-controls.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Dial extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      dial: null\r\n    }\r\n    this.dialRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {minValue, maxValue, defaultValue, step, parameter} = this.props.model\r\n    this.setState({\r\n      dial: new PrecisionInputs.FLStandardKnob(this.dialRef.current, {\r\n        min: minValue,\r\n        max: maxValue,\r\n        initial: defaultValue,\r\n        step: step,\r\n        color: \"#29DFF9\"\r\n      })\r\n    }, () => {\r\n      this.state.dial.addEventListener('change', (event) => {\r\n        this.props.changeCallback(event);\r\n        this.props.snackbarCallback(`${parameter} : ${event.target.value}`);\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    console.log(`Rendering dial ${this.props.model.parameter}`)\r\n    return (\r\n      <div ref={this.dialRef} className=\"my-knob-container\"/>\r\n    );\r\n  }\r\n}\r\n\r\nDial.propTypes = {\r\n  model: PropTypes.shape({\r\n    id: PropTypes.string.isRequired,\r\n    parameter: PropTypes.string.isRequired,\r\n    minValue: PropTypes.number.isRequired,\r\n    maxValue: PropTypes.number.isRequired,\r\n    defaultValue: PropTypes.number.isRequired,\r\n    step: PropTypes.number.isRequired\r\n  }),\r\n  changeCallback: PropTypes.func.isRequired,\r\n  snackbarCallback: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Dial;","import React from 'react';\r\nimport Dial from \"./Dial\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"../../styles/layout/Drawer.module.css\"\r\n\r\nconst Controller = (props) => {\r\n  const style = {\r\n    width: \"100%\",\r\n    overflow: \"hidden\",\r\n  }\r\n  const {snackbarCallback, sliders} = props\r\n  return (\r\n    <div style={style}>\r\n      <Grid container justify=\"center\" alignItems=\"center\" spacing={2}>\r\n        {sliders.map(slider => (\r\n          <Grid key={slider.sliderModel.id} item xs={3}>\r\n            <Dial model={slider.sliderModel}\r\n                  changeCallback={event => slider.sliderCallback(event.target.value)}\r\n                  snackbarCallback={snackbarCallback}/>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n      <Grid container justify=\"center\" alignItems=\"center\" spacing={2}>\r\n        {sliders.map(slider => (\r\n          <Grid className={styles.sliderLabel} key={slider.sliderModel.id} item xs={3}>\r\n            {slider.sliderModel.parameter}\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nController.propTypes = {\r\n  sliders: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      sliderModel: PropTypes.object.isRequired,\r\n      sliderCallback: PropTypes.func.isRequired\r\n    })\r\n  ).isRequired,\r\n  snackbarCallback: PropTypes.func.isRequired\r\n}\r\n\r\nexport default React.memo(Controller);","export const initializationConstants = {\r\n  animationSpeed: 1,\r\n  primeMoverColor: \"#ffffff\",\r\n  secondaryMoverColor: \"#ffffff\",\r\n  accentColor: \"\",\r\n  startingOctave: 3,\r\n  currentPatch: 0,\r\n  displayAnimation: true,\r\n  displayWaveform: true,\r\n  displayNotes: false,\r\n  arpeggiatorSemitones: [0,2,7,11]\r\n};\r\n\r\nlet colourPaletteOpacity = 0.7;\r\nlet colourPalettes = [\r\n  [`rgba(226,178,207,${colourPaletteOpacity})`, `rgba(203,129,174,${colourPaletteOpacity})`, `rgba(173,83,138,${colourPaletteOpacity})`, `rgba(111,20,75,${colourPaletteOpacity})`]\r\n];\r\n\r\nclass SliderModel {\r\n  constructor(id, parameter, defaultValue, minValue, maxValue, step) {\r\n    this.id = id;\r\n    this.parameter = parameter;\r\n    this.defaultValue = defaultValue;\r\n    this.minValue = minValue;\r\n    this.maxValue = maxValue;\r\n    this.step = step;\r\n  }\r\n}\r\n\r\nexport const sliderModels = new Map();\r\nsliderModels.set(\"volume-slider\", new SliderModel(\r\n  \"volume-slider\",\r\n  \"Volume\",\r\n  0.7,\r\n  0,\r\n  1,\r\n  0.01\r\n));\r\nsliderModels.set(\"pan-slider\", new SliderModel(\r\n  \"pan-slider\",\r\n  \"Pan\",\r\n  0,\r\n  -1.0,\r\n  1.0,\r\n  0.01\r\n));\r\nsliderModels.set(\"variance-slider\", new SliderModel(\r\n    \"variance-slider\",\r\n    \"Variance\",\r\n    1,\r\n    0,\r\n    1,\r\n    0.01\r\n))\r\nsliderModels.set(\"attack-slider\", new SliderModel(\r\n  \"attack-slider\",\r\n  \"Attack\",\r\n  0.1,\r\n  0.01,\r\n  1,\r\n  0.01\r\n));\r\nsliderModels.set(\"decay-slider\", new SliderModel(\r\n  \"decay-slider\",\r\n  \"Decay\",\r\n  0.1,\r\n  0.01,\r\n  1,\r\n  0.01\r\n));\r\nsliderModels.set(\"sustain-slider\", new SliderModel(\r\n  \"sustain-slider\",\r\n  \"Sustain\",\r\n  0.8,\r\n  0.01,\r\n  1,\r\n  0.01\r\n));\r\nsliderModels.set(\"release-slider\", new SliderModel(\r\n  \"release-slider\",\r\n  \"Release\",\r\n  1,\r\n  0.01,\r\n  3,\r\n  0.01\r\n));\r\nsliderModels.set(\"mod-index-slider\", new SliderModel(\r\n  \"mod-index-slider\",\r\n  \"modIndex\",\r\n  5,\r\n  0,\r\n  10,\r\n  0.01\r\n));\r\nsliderModels.set(\"mod-ratio-slider\", new SliderModel(\r\n  \"mod-ratio-slider\",\r\n  \"modRatio\",\r\n  2,\r\n  0,\r\n  5,\r\n  0.01\r\n));\r\nsliderModels.set(\"mod-duration-slider\", new SliderModel(\r\n  \"mod-duration-slider\",\r\n  \"modDuration\",\r\n  1,\r\n  0,\r\n  3,\r\n  0.01\r\n));\r\nsliderModels.set(\"delay-time-slider\", new SliderModel(\r\n  \"delay-time-slider\",\r\n  \"Delay time\",\r\n  1,\r\n  0,\r\n  4,\r\n  0.01\r\n));\r\nsliderModels.set(\"delay-feedback-slider\", new SliderModel(\r\n  \"delay-feedback-slider\",\r\n  \"Feedback\",\r\n  0.3,\r\n  0,\r\n  0.99,\r\n  0.01\r\n));\r\nsliderModels.set(\"delay-mix-slider\", new SliderModel(\r\n  \"delay-mix-slider\",\r\n  \"Delay mix\",\r\n  0.15,\r\n  0,\r\n  1,\r\n  0.01\r\n));\r\nsliderModels.set(\"reverb-mix-slider\", new SliderModel(\r\n  \"reverb-mix-slider\",\r\n  \"Reverb mix\",\r\n  0.8,\r\n  0,\r\n  1,\r\n  0.01\r\n));\r\nsliderModels.set(\"arpeggiator-speed-slider\", new SliderModel(\r\n  \"arpeggiator-speed-slider\",\r\n  \"Speed\",\r\n  1.25,\r\n  0.5,\r\n  2,\r\n  0.01\r\n));\r\nsliderModels.set(\"arpeggiator-octave-slider\", new SliderModel(\r\n  \"arpeggiator-octave-slider\",\r\n  \"Octaves\",\r\n  3,\r\n  1,\r\n  3,\r\n  1\r\n));\r\n","import React from 'react';\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport Controller from \"../controller/Controller\";\r\nimport {sliderModels} from \"../util/InitializationConstants\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"../../styles/layout/Drawer.module.css\"\r\n\r\n\r\nconst ControllerALayout = (props) => {\r\n  const globalController = {\r\n    snackbarCallback: props.snackbarCallback,\r\n    sliders: [{\r\n      sliderModel: sliderModels.get(\"volume-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setVolume(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"pan-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setPan(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"variance-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setVariance(value)\r\n    }]\r\n  }\r\n  const envelopeController = {\r\n    snackbarCallback: props.snackbarCallback,\r\n    sliders: [{\r\n      sliderModel: sliderModels.get(\"attack-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setAttack(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"decay-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setDecay(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"sustain-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setSustain(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"release-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setRelease(value)\r\n    }]\r\n  }\r\n  return (\r\n    <SwipeableViews className={styles.sliderContainer} enableMouseEvents resistance>\r\n      <Controller {...globalController}/>\r\n      <Controller {...envelopeController}/>\r\n    </SwipeableViews>\r\n  );\r\n}\r\n\r\nControllerALayout.propTypes = {\r\n  audioContext: PropTypes.object.isRequired,\r\n  snackbarCallback: PropTypes.func.isRequired\r\n}\r\n\r\nexport default React.memo(ControllerALayout);","import React, {useCallback, useState} from 'react';\r\nimport \"../../styles/layout/Piano.css\"\r\nimport {initializationConstants} from \"../util/InitializationConstants\";\r\n\r\nconst PianoLayout = (props) => {\r\n  const keys = [\r\n    {key: \"c\", type: \"white\"},\r\n    {key: \"cs\", type: \"black\"},\r\n    {key: \"d\", type: \"white\"},\r\n    {key: \"ds\", type: \"black\"},\r\n    {key: \"e\", type: \"white\"},\r\n    {key: \"f\", type: \"white\"},\r\n    {key: \"fs\", type: \"black\"},\r\n    {key: \"g\", type: \"white\"},\r\n    {key: \"gs\", type: \"black\"},\r\n    {key: \"a\", type: \"white\"},\r\n    {key: \"as\", type: \"black\"},\r\n    {key: \"b\", type: \"white\"}\r\n  ];\r\n\r\n  const [keysActivated, setKeysActivated] = useState(initializationConstants.arpeggiatorSemitones);\r\n\r\n  const keySelectHandler = useCallback((index) => {\r\n    setKeysActivated(prevState => {\r\n      const keysArray = prevState.includes(index) ?\r\n        prevState.filter(i => i !== index) : [...prevState, index];\r\n      const sortedKeysArray = keysArray.sort((a, b) => a - b);\r\n      props.keySelectionCallback(sortedKeysArray);\r\n      return sortedKeysArray;\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      {console.log(\"rendering piano\")}\r\n      <ul className=\"set\">\r\n        {keys.map((k,i) => (\r\n          <li key={i}\r\n              className={`${k.key} ${k.type} ${keysActivated.includes(i) ? \"keySelected\": \"\"}`}\r\n              onClick={(event) => keySelectHandler(i)}\r\n          />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(PianoLayout);","import React from 'react';\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport {sliderModels} from \"../util/InitializationConstants\";\r\nimport Controller from \"../controller/Controller\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"../../styles/layout/Drawer.module.css\"\r\nimport PianoLayout from \"./PianoLayout\";\r\nimport {keys} from \"@material-ui/core/styles/createBreakpoints\";\r\n\r\nconst ControllerBLayout = (props) => {\r\n  const arpeggiatorController = {\r\n    snackbarCallback: props.snackbarCallback,\r\n    sliders: [{\r\n      sliderModel: sliderModels.get(\"arpeggiator-speed-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setArpeggiatorSpeed(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"arpeggiator-octave-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setArpeggiatorOctaves(value)\r\n    }]\r\n  }\r\n  const auxEffectsController = {\r\n    snackbarCallback: props.snackbarCallback,\r\n    sliders: [{\r\n      sliderModel: sliderModels.get(\"delay-time-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setDelayTime(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"delay-feedback-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setDelayFeedback(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"delay-mix-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setDelayMix(value)\r\n    }, {\r\n      sliderModel: sliderModels.get(\"reverb-mix-slider\"),\r\n      sliderCallback: (value) => props.audioContext.setReverbMix(value)\r\n    }]\r\n  }\r\n  return (\r\n    <SwipeableViews className={styles.sliderContainer} enableMouseEvents resistance animateHeight>\r\n      <Controller {...arpeggiatorController} />\r\n      <PianoLayout keySelectionCallback={(keysArray) => props.audioContext.setArpeggiatorSemitones(keysArray)}/>\r\n      <Controller {...auxEffectsController} />\r\n    </SwipeableViews>\r\n  );\r\n}\r\n\r\nControllerBLayout.propTypes = {\r\n  audioContext: PropTypes.object.isRequired,\r\n  snackbarCallback: PropTypes.func.isRequired\r\n}\r\n\r\nexport default React.memo(ControllerBLayout);","import React from 'react';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport styles from \"../../styles/layout/Drawer.module.css\"\r\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\r\nimport ThemeProvider from \"@material-ui/styles/ThemeProvider\";\r\nimport {Divider} from \"@material-ui/core\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport PropTypes from 'prop-types';\r\nimport {initializationConstants} from \"../util/InitializationConstants\";\r\n\r\nconst BottomDrawer = (props) => {\r\n\r\n  const horizontalSliderTheme = createMuiTheme({\r\n    overrides: {\r\n      MuiSlider: {\r\n        thumb: {\r\n          color: \"#29DFF9\",\r\n        },\r\n        track: {\r\n          color: '#29DFF9'\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  {console.log(\"Rendering bottom drawer\")}\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.bottomDrawerSwitches}>\r\n        <FormControl>\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              value=\"displayAnimation\"\r\n              control={\r\n                <Switch color=\"primary\" defaultChecked={initializationConstants.displayAnimation}\r\n                        onChange={(event) => props.graphicsContext.setDisplayAnimation(event.target.checked)}/>\r\n              }\r\n              label=\"Display animation\"\r\n              labelPlacement=\"end\"/>\r\n            <FormControlLabel\r\n              value=\"displayWaveform\"\r\n              control={\r\n                <Switch color=\"primary\" defaultChecked={initializationConstants.displayWaveform}\r\n                        onChange={(event) => props.graphicsContext.setDisplayWaveform(event.target.checked)}/>\r\n              }\r\n              label=\"Display waveform\"\r\n              labelPlacement=\"end\"/>\r\n            <FormControlLabel\r\n              value=\"displayNotes\"\r\n              control={\r\n                <Switch color=\"primary\" defaultChecked={initializationConstants.displayNotes}\r\n                        onChange={(event) => props.toggleNoteInfoCallback(event.target.checked)}/>\r\n              }\r\n              label=\"Display Notes\"\r\n              labelPlacement=\"end\"/>\r\n          </FormGroup>\r\n        </FormControl>\r\n      </div>\r\n\r\n      <Divider variant={\"middle\"}/>\r\n\r\n      <div className={styles.bottomDrawerSliderSection}>\r\n        <div className={styles.bottomDrawerSliderAndLabelGroup}>\r\n          <Typography id=\"current-octave-slider\" gutterBottom>\r\n            Current octave\r\n          </Typography>\r\n          <ThemeProvider theme={horizontalSliderTheme}>\r\n            <Slider\r\n              defaultValue={initializationConstants.startingOctave}\r\n              aria-labelledby=\"current-octave-slider\"\r\n              valueLabelDisplay=\"auto\"\r\n              step={1}\r\n              marks\r\n              min={1}\r\n              max={7}\r\n              onChangeCommitted={(_, value) => props.audioContext.setCurrentOctave(value)}/>\r\n          </ThemeProvider>\r\n        </div>\r\n\r\n        <div className={styles.bottomDrawerSliderAndLabelGroup}>\r\n          <Typography id=\"animation-speed-slider\" gutterBottom>\r\n            Animation speed\r\n          </Typography>\r\n          <ThemeProvider theme={horizontalSliderTheme}>\r\n            <Slider\r\n              defaultValue={initializationConstants.animationSpeed}\r\n              aria-labelledby=\"animation-speed-slider\"\r\n              valueLabelDisplay=\"auto\"\r\n              step={1}\r\n              marks\r\n              min={1}\r\n              max={5}\r\n              onChangeCommitted={(_, value) => props.graphicsContext.setAnimationSpeed(value)}/>\r\n          </ThemeProvider>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nBottomDrawer.propTypes = {\r\n  audioContext: PropTypes.object.isRequired,\r\n  graphicsContext: PropTypes.object.isRequired,\r\n  toggleNoteInfoCallback: PropTypes.func.isRequired\r\n}\r\n\r\nexport default React.memo(BottomDrawer);","import React from 'react';\r\nimport {Container, Divider, SwipeableDrawer} from \"@material-ui/core\";\r\nimport ControllerALayout from \"./ControllerALayout\";\r\nimport ControllerBLayout from \"./ControllerBLayout\";\r\nimport styles from \"../../styles/layout/Drawer.module.css\"\r\nimport BottomDrawer from \"./BottomDrawer\";\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ControllerDrawer = (props) => {\r\n\r\n  const textDeclaration = (\r\n    <>\r\n      Copyleft 2020 &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp;   &lt;/&gt; with &lt;3 by <a\r\n      href=\"https://github.com/Thrifleganger/cloud-inversion\">Akash Murthy</a>\r\n    </>\r\n  )\r\n  return (\r\n    <>\r\n      <SwipeableDrawer onClose={props.toggleSliderDrawer(false)} onOpen={props.toggleSliderDrawer(true)}\r\n                       open={props.isSliderControllerOpen} swipeAreaWidth={150} anchor={\"top\"} keepMounted={true}>\r\n        <div className={styles.sliderDrawer}>\r\n          <Container maxWidth=\"sm\">\r\n            {console.log(\"Rendering slider drawer\")}\r\n            <ControllerALayout audioContext={props.audioContext} snackbarCallback={props.snackbarCallback}/>\r\n            <Divider variant={\"middle\"}/>\r\n            <ControllerBLayout audioContext={props.audioContext} snackbarCallback={props.snackbarCallback}/>\r\n          </Container>\r\n        </div>\r\n        <div className={styles.drawerHandleTop}/>\r\n      </SwipeableDrawer>\r\n      <SwipeableDrawer onClose={props.toggleBottomDrawer(false)} onOpen={props.toggleBottomDrawer(true)}\r\n                       open={props.isBottomDrawerOpen} swipeAreaWidth={50} anchor={\"bottom\"} keepMounted={true}>\r\n        <div className={styles.bottomDrawer}>\r\n          <div className={styles.drawerHandleBottom}/>\r\n          <Container maxWidth=\"sm\">\r\n            <BottomDrawer audioContext={props.audioContext}\r\n                          graphicsContext={props.graphicsContext}\r\n                          toggleNoteInfoCallback={props.toggleNoteInfoCallback}/>\r\n          </Container>\r\n          <div className={styles.textDeclaration}>\r\n            {textDeclaration}\r\n          </div>\r\n        </div>\r\n      </SwipeableDrawer>\r\n    </>\r\n  );\r\n}\r\n\r\nControllerDrawer.propTypes = {\r\n  toggleSliderDrawer: PropTypes.func.isRequired,\r\n  isSliderControllerOpen: PropTypes.bool.isRequired,\r\n  isBottomDrawerOpen: PropTypes.bool.isRequired,\r\n  toggleBottomDrawer: PropTypes.func.isRequired,\r\n  audioContext: PropTypes.object.isRequired,\r\n  graphicsContext: PropTypes.object.isRequired,\r\n  snackbarCallback: PropTypes.func.isRequired,\r\n  toggleNoteInfoCallback: PropTypes.func.isRequired\r\n}\r\n\r\nexport default React.memo(ControllerDrawer);","import React from \"react\";\r\nimport styles from \"../../styles/layout/MainLayout.module.css\"\r\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline';\r\n\r\nconst SplashScreen = (props) => {\r\n\r\n  return (\r\n    <div className={styles.splashScreen}>\r\n      <div className={styles.splashScreenButton}>\r\n        <PlayCircleOutlineIcon\r\n          htmlColor={\"#4b3092\"} fontSize={\"large\"} onClick={props.startAudioContext} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SplashScreen","import React from 'react';\r\nimport styles from \"../../styles/layout/MainLayout.module.css\";\r\n\r\nconst NoteInfo = () => {\r\n\r\n  const notes = [\"C\", \"C<sub>#</sub>\", \"D\", \"D<sub>#</sub>\",\r\n    \"E\", \"F\", \"F<sub>#</sub>\", \"G\", \"G<sub>#</sub>\", \"A\", \"A<sub>#</sub>\", \"B\"];\r\n  const notesInfo = (\r\n    <>\r\n      {notes.map(note => <span dangerouslySetInnerHTML={{__html: note}} key={note}/>)}\r\n    </>\r\n  )\r\n\r\n  return (\r\n    <div className={styles.notesInfoSection}>\r\n      {notesInfo}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(NoteInfo);","import React, {useCallback, useState} from 'react';\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport PropTypes from 'prop-types';\r\nimport ControllerDrawer from \"./ControllerDrawer\";\r\nimport styles from \"../../styles/layout/MainLayout.module.css\"\r\nimport SplashScreen from \"./SplashScreen\";\r\nimport NoteInfo from \"./NoteInfo\";\r\n\r\nconst MainLayout = (props) => {\r\n\r\n  const [isSliderControllerOpen, setSliderControllerOpen] = useState(false);\r\n  const [isBottomDrawerOpen, setBottomDrawerOpen] = useState(false);\r\n  const [isSnackbarOpen, setSnackbarOpen] = useState(false);\r\n  const [snackbarMessage, setSnackbarMessage] = useState(\"\");\r\n  const [isAppLoaded, setAppLoaded] = useState(false);\r\n  const [shouldDisplayInfo, setDisplayInfo] = useState(false);\r\n\r\n  const startAudioContext = useCallback(() => {\r\n    props.audioContext.start()\r\n    setAppLoaded(true);\r\n  }, []);\r\n\r\n  const toggleSliderDrawer = useCallback((isOpen) => (event) => {\r\n      if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n        return;\r\n      }\r\n      setSliderControllerOpen(isOpen);\r\n    }, []\r\n  );\r\n\r\n  const toggleBottomDrawer = useCallback((isOpen) => (event) => {\r\n      if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n        return;\r\n      }\r\n      setBottomDrawerOpen(isOpen);\r\n    }, []\r\n  );\r\n\r\n  const snackbarCallback = useCallback(\r\n    (message) => {\r\n      setSnackbarOpen(true);\r\n      setSnackbarMessage(message);\r\n    }, []\r\n  );\r\n\r\n  const toggleNoteInfoCallback = useCallback((value) => setDisplayInfo(value), []);\r\n\r\n  return (\r\n    <>\r\n      <ControllerDrawer toggleSliderDrawer={toggleSliderDrawer}\r\n                        isSliderControllerOpen={isSliderControllerOpen}\r\n                        isBottomDrawerOpen={isBottomDrawerOpen}\r\n                        toggleBottomDrawer={toggleBottomDrawer}\r\n                        audioContext={props.audioContext}\r\n                        graphicsContext={props.graphicsContext}\r\n                        snackbarCallback={snackbarCallback}\r\n                        toggleNoteInfoCallback={toggleNoteInfoCallback}/>\r\n      <Snackbar className={styles.snackbarLayout}\r\n                open={isSnackbarOpen}\r\n                autoHideDuration={3000}\r\n                onClose={() => setSnackbarOpen(false)}\r\n                message={snackbarMessage}\r\n                anchorOrigin={{vertical: 'bottom', horizontal: 'center'}}/>\r\n      {shouldDisplayInfo ? (<NoteInfo/>) : \"\"}\r\n      {isAppLoaded ? \"\" : (<SplashScreen startAudioContext={startAudioContext}/>)}\r\n    </>\r\n  );\r\n}\r\n\r\nMainLayout.propTypes = {\r\n  audioContext: PropTypes.object.isRequired,\r\n  graphicsContext: PropTypes.object.isRequired\r\n}\r\n\r\nexport default MainLayout;","import {Midi} from \"tone\";\r\n\r\nexport const rangeMap = (value, x1, y1, x2, y2) => (value - x1) * (y2 - x2) / (y1 - x1) + x2;\r\n\r\nexport const convertXToFrequency = (x, currentOctave, isFullScale = false) => {\r\n  return Midi(Math.floor(convertXToNoteNumber(x, currentOctave))).toFrequency();\r\n}\r\n\r\nexport const convertXToNoteNumber = (x, currentOctave, isFullScale = false) => {\r\n  return Math.floor(currentOctave * 12 + 12 + rangeMap(x, 0, window.innerWidth, 0, 12));\r\n}\r\n\r\nexport const convertYToVelocity = (y) => {\r\n  return rangeMap(y, 0, window.innerHeight, 0, 1);\r\n}","import {Channel, Destination, Filter, Gain, LFO, Panner, PingPongDelay, Reverb, start} from 'tone'\r\nimport {rangeMap} from \"../util/Util\";\r\nimport {sliderModels, initializationConstants} from \"../util/InitializationConstants\";\r\n\r\nclass AudioContext {\r\n\r\n  constructor() {\r\n    this.instrument = null;\r\n    this.volume = sliderModels.get(\"volume-slider\").defaultValue;\r\n    this.pan = sliderModels.get(\"pan-slider\").defaultValue;\r\n    this.variance = sliderModels.get(\"variance-slider\").defaultValue;\r\n\r\n    this.attack = sliderModels.get(\"attack-slider\").defaultValue;\r\n    this.decay = sliderModels.get(\"decay-slider\").defaultValue;\r\n    this.sustain = sliderModels.get(\"sustain-slider\").defaultValue;\r\n    this.release = sliderModels.get(\"release-slider\").defaultValue;\r\n\r\n    this.delayTime = sliderModels.get(\"delay-time-slider\").defaultValue;\r\n    this.delayFeedback = sliderModels.get(\"delay-feedback-slider\").defaultValue;\r\n    this.delayMix = sliderModels.get(\"delay-mix-slider\").defaultValue;\r\n    this.reverbMix = sliderModels.get(\"reverb-mix-slider\").defaultValue;\r\n\r\n    this.arpeggiatorSpeed = sliderModels.get(\"arpeggiator-speed-slider\").defaultValue;\r\n    this.arpeggiatorOctaves = sliderModels.get(\"arpeggiator-octave-slider\").defaultValue;\r\n    this.arpeggiatorSemitones = initializationConstants.arpeggiatorSemitones;\r\n\r\n    this.currentOctave = initializationConstants.startingOctave;\r\n  }\r\n\r\n  start() {\r\n    console.log(\"Started audio context\");\r\n    start().then();\r\n  }\r\n\r\n  initialize(instrument) {\r\n    console.log(\"Initializing audioContext\");\r\n    this.instrument = instrument;\r\n    this.instrument.initialize(this);\r\n    const {patch} = this.instrument;\r\n\r\n    patch.volume = new Gain(this.volume, \"normalRange\");\r\n    patch.pan = new Panner(this.pan);\r\n    patch.tone = new Filter({\r\n      type: \"lowpass\",\r\n      frequency: 100\r\n    });\r\n    patch.lfo = new LFO(0.1, 300, 10000)\r\n    patch.lfo.start();\r\n\r\n    patch.delay = new PingPongDelay({\r\n      delayTime: this.delayTime,\r\n      maxDelayTime: 4\r\n    });\r\n    this.setDelayFeedback(this.delayFeedback)\r\n    this.setDelayMix(this.delayMix);\r\n    patch.reverb = new Reverb(10);\r\n    this.setReverbMix(this.reverbMix);\r\n\r\n    patch.mainChannel = new Channel();\r\n    patch.reverbChannel = new Channel();\r\n    patch.delayChannel = new Channel();\r\n    patch.synth.connect(patch.volume);\r\n    patch.volume.connect(patch.pan);\r\n    patch.pan.connect(patch.tone);\r\n    patch.lfo.connect(patch.tone.frequency);\r\n    patch.tone.connect(patch.mainChannel);\r\n    patch.mainChannel.send(\"delay-bus\", -10);\r\n    patch.mainChannel.send(\"reverb-bus\", -10);\r\n    patch.delayChannel.receive(\"delay-bus\");\r\n    patch.reverbChannel.receive(\"reverb-bus\");\r\n    patch.delayChannel.connect(patch.delay);\r\n    patch.reverbChannel.connect(patch.reverb);\r\n    const finalOutputNode = new Gain(1, \"normalRange\");\r\n    patch.delay.connect(finalOutputNode);\r\n    patch.reverb.connect(finalOutputNode);\r\n\r\n    finalOutputNode.connect(Destination);\r\n  }\r\n\r\n  handleGenericTriggerEvent = (coordinates) => {\r\n    this.instrument.triggerAttack(coordinates, this.currentOctave);\r\n  }\r\n\r\n  handleGenericReleaseEvent = (_) => {\r\n    this.instrument.triggerRelease();\r\n  }\r\n\r\n  setVolume(volume) {\r\n    this.volume = volume;\r\n    this.instrument.patch.volume.gain.value = volume;\r\n  }\r\n  setPan(pan) {\r\n    this.pan = pan;\r\n    this.instrument.patch.pan.pan.value = this.pan;\r\n  }\r\n  setVariance(variance) {\r\n    this.variance = variance;\r\n    console.log(this.instrument.patch.lfo.min);\r\n    this.instrument.patch.lfo.min = rangeMap(this.variance, 0, 1, 2000, 300);\r\n    this.instrument.patch.lfo.max = rangeMap(this.variance, 0, 1, 2000, 10000);\r\n  }\r\n\r\n  setAttack(attack) {\r\n    this.attack = attack;\r\n    this.instrument.setEnvelope(this.attack, this.decay, this.sustain, this.release);\r\n  }\r\n  setDecay(decay) {\r\n    this.decay = decay;\r\n    this.instrument.setEnvelope(this.attack, this.decay, this.sustain, this.release);\r\n  }\r\n  setSustain(sustain) {\r\n    this.sustain = sustain;\r\n    this.instrument.setEnvelope(this.attack, this.decay, this.sustain, this.release);\r\n  }\r\n  setRelease(release) {\r\n    this.release = release;\r\n    this.instrument.setEnvelope(this.attack, this.decay, this.sustain, this.release);\r\n  }\r\n\r\n  setDelayTime(delayTime) {\r\n    this.delayTime = delayTime;\r\n    this.instrument.patch.delay.delayTime.value = this.delayTime;\r\n  }\r\n  setDelayFeedback(feedback) {\r\n    this.delayFeedback = feedback;\r\n    this.instrument.patch.delay.feedback.value = this.delayFeedback;\r\n  }\r\n  setDelayMix(mix) {\r\n    this.delayMix = mix;\r\n    this.instrument.patch.delay.wet.value = this.delayMix;\r\n  }\r\n  setReverbMix(mix) {\r\n    this.reverbMix = mix;\r\n    this.instrument.patch.reverb.wet.value = this.reverbMix;\r\n  }\r\n\r\n  setArpeggiatorSpeed(speed) {\r\n    this.arpeggiatorSpeed = speed;\r\n    if (this.instrument.id === \"arpeggiator\") {\r\n      this.instrument.setPlaybackRate(speed);\r\n    }\r\n  }\r\n  setArpeggiatorOctaves(octaves) {\r\n    this.arpeggiatorOctaves = octaves;\r\n    if (this.instrument.id === \"arpeggiator\") {\r\n      this.instrument.setOctaves(octaves);\r\n    }\r\n  }\r\n  setArpeggiatorSemitones(semitonesArray) {\r\n    this.arpeggiatorSemitones = semitonesArray;\r\n    if (this.instrument.id === \"arpeggiator\") {\r\n      this.instrument.setArpeggiatorSemitones(semitonesArray);\r\n    }\r\n  }\r\n\r\n  setCurrentOctave(currentOctave) {\r\n    this.currentOctave = currentOctave;\r\n  }\r\n}\r\n\r\nexport default AudioContext;","export default class Patch {\r\n  constructor() {\r\n    this.volume = null;\r\n    this.pan = null;\r\n    this.tone = null;\r\n    this.synth = null;\r\n    this.reverb = null;\r\n    this.delay = null;\r\n    this.envelope = null;\r\n  }\r\n}","import Patch from \"./AudioPatch\";\r\nimport {Synth, Pattern, Midi, Transport} from 'tone'\r\nimport {convertXToNoteNumber, convertYToVelocity} from \"../util/Util\";\r\n\r\nclass Arpeggiator {\r\n  constructor() {\r\n    this.id = \"arpeggiator\";\r\n    this.patch = new Patch();\r\n    this.numberOfOctaves = null;\r\n    this.playbackRate = null;\r\n    this.semitones = null;\r\n    this.audioContext = null;\r\n  }\r\n\r\n  initialize(audioContext) {\r\n    console.log(\"Initializing argpeggiator\");\r\n    this.audioContext = audioContext;\r\n    this.patch.synth = new Synth({\r\n      oscillator: {\r\n        type: \"sawtooth\"\r\n      }\r\n    });\r\n    this.patch.pattern = new Pattern({\r\n      pattern: \"upDown\"\r\n    });\r\n    this.patch.pattern.interval = \"16n\";\r\n    this.setEnvelope(audioContext.attack, audioContext.decay, audioContext.sustain, audioContext.release);\r\n    this.playbackRate = audioContext.arpeggiatorSpeed;\r\n    this.numberOfOctaves = audioContext.arpeggiatorOctaves;\r\n    this.semitones = audioContext.arpeggiatorSemitones;\r\n  }\r\n\r\n  triggerAttack(coordinates, currentOctave) {\r\n    Transport.start();\r\n    const {pattern, synth} = this.patch;\r\n    let notes = [];\r\n    for (let i of Array(Math.round(this.numberOfOctaves)).keys()) {\r\n      notes = notes.concat(this.semitones.map(note => note + (i * 12)));\r\n    }\r\n    const velocity = convertYToVelocity(coordinates[0].y, currentOctave);\r\n    pattern.callback = (time, note) => synth.triggerAttackRelease(note, \"16n\", undefined, velocity);\r\n    const midiNoteNumber = convertXToNoteNumber(coordinates[0].x, currentOctave);\r\n    pattern.values = notes.map(note => Math.floor(Midi(note + midiNoteNumber).toFrequency()));\r\n    pattern.playbackRate = this.playbackRate;\r\n    pattern.start();\r\n  }\r\n\r\n  triggerRelease(coordinates) {\r\n    this.patch.pattern.stop();\r\n    Transport.stop();\r\n  }\r\n\r\n  setArpeggiatorSemitones(array) {\r\n    this.semitones = [...array];\r\n  }\r\n\r\n  setOctaves(octaves) {\r\n    this.numberOfOctaves = octaves;\r\n  }\r\n\r\n  setPlaybackRate(speed) {\r\n    this.playbackRate = speed;\r\n    this.patch.pattern.playbackRate = speed;\r\n  }\r\n\r\n  setEnvelope(attack, decay, sustain, release) {\r\n    const {envelope:env} = this.patch.synth;\r\n    env.attack = attack\r\n    env.decay = decay;\r\n    env.sustain = sustain;\r\n    env.release = release;\r\n  }\r\n}\r\n\r\nexport default Arpeggiator;\r\n","import React, {Component} from 'react';\r\nimport Arpeggiator from \"../audio/Arpeggiator\";\r\n\r\nclass AudioCanvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {width: 0, height: 0};\r\n    this.isTouchActivated = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateWindowDimensions();\r\n    window.addEventListener('resize', this.updateWindowDimensions);\r\n    this.props.audioContext.initialize(new Arpeggiator());\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  updateWindowDimensions = () => {\r\n    this.setState({width: window.innerWidth, height: window.innerHeight});\r\n  }\r\n\r\n  render() {\r\n    const style = {\r\n      position: \"absolute\",\r\n      left: 0,\r\n      top: 0,\r\n      height: this.state.height,\r\n      width: this.state.width\r\n    }\r\n    return (\r\n      <div style={style}\r\n           onMouseDown={event => this.handleGenericPressEvent([{x: event.clientX, y: event.clientY}]) }\r\n           onMouseUp={() => this.handleGenericReleasedEvent([])}\r\n           onTouchStart={(event) => {\r\n             if (this.isTouchActivated) {\r\n               return;\r\n             }\r\n             if (event.targetTouches.length === 0) {\r\n               return;\r\n             }\r\n             this.isTouchActivated = true;\r\n             this.handleGenericPressEvent([{\r\n               x: event.targetTouches.item(0).clientX,\r\n               y: event.targetTouches.item(0).clientY\r\n             }]);\r\n             /*const coordinates = Array(event.touches.length).fill()\r\n               .flatMap((_,i) => [{x: event.touches.item(i).clientX, y: event.touches.item(i).clientY}])\r\n             this.handleGenericPressEvent(coordinates);*/\r\n           }}\r\n           onTouchEnd={(event) => {\r\n\r\n             if (event.targetTouches.length !== 0) {\r\n               return;\r\n             }\r\n             this.isTouchActivated = false;\r\n             this.handleGenericReleasedEvent(event);\r\n           }}/>\r\n    );\r\n  }\r\n\r\n  handleGenericPressEvent = (coordinates) => {\r\n    this.props.audioContext.handleGenericTriggerEvent(coordinates)\r\n  }\r\n\r\n  handleGenericReleasedEvent = (coordinates) => {\r\n    this.props.audioContext.handleGenericReleaseEvent(coordinates);\r\n  }\r\n}\r\n\r\nexport default AudioCanvas;\r\n","import p5 from 'p5';\r\nimport PrimeMover from \"./PrimeMover\";\r\nimport {v4 as uuid} from 'uuid'\r\nimport SecondaryMoverSystem from \"./SecondaryMoverSystem\";\r\nimport {initializationConstants} from \"../util/InitializationConstants\";\r\n\r\nclass GraphicsContext {\r\n  constructor() {\r\n    this.myP5 = null;\r\n    this.primeMovers = new Map();\r\n    this.secondaryMoverSystems = new Map();\r\n    this.previousPrimeMover = null;\r\n    this.isTouchActivated = false;\r\n\r\n    this.moverProperties = {\r\n      animationSpeed: initializationConstants.animationSpeed,\r\n      primeMoverColor: initializationConstants.primeMoverColor,\r\n      secondaryMoverColor: initializationConstants.secondaryMoverColor\r\n    }\r\n    this.shouldDisplayAnimation = true;\r\n    this.shouldDisplayWaveform = true;\r\n    this.shouldDisplayInfo = false;\r\n  }\r\n\r\n  initialize(domReference) {\r\n    this.myP5 = new p5(this.sketch, domReference);\r\n  }\r\n\r\n  sketch = (p) => {\r\n\r\n    p.setup = () => {\r\n      console.log(\"Setup\");\r\n      p.createCanvas(p.windowWidth, p.windowHeight);\r\n    }\r\n\r\n    p.draw = () => {\r\n      p.clear();\r\n      if (this.shouldDisplayAnimation) {\r\n        this.primeMovers.forEach(primeMover => primeMover.update());\r\n        this.secondaryMoverSystems.forEach(system => system.update());\r\n      }\r\n    }\r\n\r\n    p.windowResized = () => {\r\n      p.resizeCanvas(p.windowWidth, p.windowHeight);\r\n    }\r\n\r\n    p.touchStarted = (event) => {\r\n      if (this.isTouchActivated) {\r\n        return;\r\n      }\r\n      if (event.targetTouches.length === 0) {\r\n        return;\r\n      }\r\n      this.isTouchActivated = true;\r\n      this.handleGenericPressEvent([{\r\n        x: event.targetTouches.item(0).clientX,\r\n        y: event.targetTouches.item(0).clientY\r\n      }]);\r\n      // Handle multiple touches\r\n      /*const coordinates = Array(event.targetTouches.length).fill()\r\n        .flatMap((_, i) => [{x: event.touches.item(i).clientX, y: event.touches.item(i).clientY}])\r\n      this.handleGenericPressEvent(coordinates)*/\r\n    }\r\n\r\n    p.mousePressed = (event) => {\r\n      this.handleGenericPressEvent([{x: event.x, y: event.y}]);\r\n    }\r\n\r\n    p.touchEnded = (event) => {\r\n      if (event.targetTouches.length !== 0) {\r\n        return;\r\n      }\r\n      this.isTouchActivated = false;\r\n      this.handleGenericReleasedEvent(event);\r\n    }\r\n\r\n    p.mouseReleased = () => {\r\n      this.handleGenericReleasedEvent([]);\r\n    }\r\n  }\r\n\r\n  handleGenericPressEvent = (coordinates) => {\r\n    if (!this.shouldDisplayAnimation) {\r\n      return;\r\n    }\r\n    coordinates.forEach(coordinate => {\r\n      const primaryMoverId = uuid();\r\n      const primeMover = new PrimeMover(\r\n        primaryMoverId,\r\n        coordinate,\r\n        this.myP5,\r\n        this.previousPrimeMover,\r\n        this.moverProperties\r\n      );\r\n      primeMover.registerDestructionCallback(() => this.handlePrimeMoverDestruction(primeMover));\r\n      this.primeMovers.set(primaryMoverId, primeMover);\r\n      this.previousPrimeMover = primeMover;\r\n\r\n      const secondaryMoverSystemId = uuid();\r\n      const secondaryMoverSystem = new SecondaryMoverSystem(\r\n        secondaryMoverSystemId,\r\n        coordinate,\r\n        this.myP5,\r\n        this.moverProperties\r\n      );\r\n      this.secondaryMoverSystems.set(secondaryMoverSystemId, secondaryMoverSystem);\r\n      secondaryMoverSystem.registerDestructionCallback(\r\n        () =>this.handleSecondaryMoverSystemDestruction(secondaryMoverSystem));\r\n    });\r\n  }\r\n\r\n  handleGenericReleasedEvent = (_) => {\r\n    if (!this.shouldDisplayAnimation) {\r\n      return;\r\n    }\r\n    this.secondaryMoverSystems.forEach(system => system.initiateDestruction());\r\n  }\r\n\r\n  handlePrimeMoverDestruction(primeMover) {\r\n    this.primeMovers.delete(primeMover.id);\r\n    primeMover = null;\r\n  }\r\n\r\n  handleSecondaryMoverSystemDestruction(system) {\r\n    this.secondaryMoverSystems.delete(system.id);\r\n    system = null;\r\n  }\r\n\r\n  setDisplayAnimation(value) {\r\n    this.shouldDisplayAnimation = value;\r\n  }\r\n\r\n  setDisplayWaveform(value) {\r\n    this.shouldDisplayWaveform = value;\r\n  }\r\n\r\n  setAnimationSpeed(value) {\r\n    this.moverProperties.animationSpeed = value;\r\n  }\r\n}\r\n\r\nexport default GraphicsContext;","import React, {Component} from 'react';\nimport GradientBackground from \"./components/layout/GradientBackground\";\nimport './styles/layout/GradientBackground.module.css'\nimport GraphicsCanvas from \"./components/layout/GraphicsCanvas\";\nimport MainLayout from \"./components/layout/MainLayout\";\nimport AudioContext from \"./components/audio/AudioContext\";\nimport AudioCanvas from \"./components/layout/AudioCanvas\";\nimport GraphicsContext from \"./components/graphics/GraphicsContext\";\n\nclass App extends Component {\n\n  constructor() {\n    super();\n    this.audioContext = new AudioContext();\n    this.graphicsContext = new GraphicsContext();\n  }\n  render() {\n    return (\n      <>\n        <AudioCanvas audioContext={this.audioContext}/>\n        <GraphicsCanvas graphicsContext={this.graphicsContext}/>\n        <GradientBackground/>\n        <MainLayout audioContext={this.audioContext} graphicsContext={this.graphicsContext}/>\n      </>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <App />\n  ,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sliderDrawer\":\"Drawer_sliderDrawer__Kk8bO\",\"sliderContainer\":\"Drawer_sliderContainer__1eL8v\",\"sliderLabel\":\"Drawer_sliderLabel__HMnml\",\"drawerHandleTop\":\"Drawer_drawerHandleTop__1VpNB\",\"drawerHandleBottom\":\"Drawer_drawerHandleBottom__2T_0a\",\"bottomDrawer\":\"Drawer_bottomDrawer__2m7uT\",\"bottomDrawerSliderSection\":\"Drawer_bottomDrawerSliderSection__2UCan\",\"bottomDrawerSliderAndLabelGroup\":\"Drawer_bottomDrawerSliderAndLabelGroup__eIFDx\",\"textDeclaration\":\"Drawer_textDeclaration__2jYt_\",\"bottomDrawerSwitches\":\"Drawer_bottomDrawerSwitches__1TTsN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"snackbarLayout\":\"MainLayout_snackbarLayout__347DF\",\"splashScreen\":\"MainLayout_splashScreen__1nveC\",\"splashScreenButton\":\"MainLayout_splashScreenButton__3o43a\",\"notesInfoSection\":\"MainLayout_notesInfoSection__1S99L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gradientBackground\":\"GradientBackground_gradientBackground__2-Fo7\",\"gradient\":\"GradientBackground_gradient__mofCM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sketch\":\"ProcessingSketch_sketch__cS6Hq\"};"],"sourceRoot":""}